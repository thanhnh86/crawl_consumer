{"version":3,"sources":["../src/types/bus.ts"],"sourcesContent":["import type { Transport } from '@boringnode/bus/types/main'\n\nimport type { Duration } from './helpers.js'\n\n/**\n * Interface for the bus driver\n */\nexport type BusDriver = Transport\n\n/**\n * Message sent over the cache bus\n */\nexport type CacheBusMessage = {\n  keys: string[]\n  type: CacheBusMessageType\n  namespace?: string\n}\n\nexport const CacheBusMessageType = {\n  /**\n   * An item was set in the cache\n   */\n  Set: 'set',\n\n  /**\n   * Whole cache was cleared\n   */\n  Clear: 'clear',\n\n  /**\n   * An item was deleted from the cache\n   */\n  Delete: 'delete',\n\n  /**\n   * An item was logically expired\n   */\n  Expire: 'expire',\n}\nexport type CacheBusMessageType = (typeof CacheBusMessageType)[keyof typeof CacheBusMessageType]\n\nexport type BusOptions = {\n  /**\n   * Configuration for the bus retry queue\n   */\n  retryQueue?: {\n    /**\n     * If we should retry sending messages that failed to be sent\n     */\n    enabled?: boolean\n\n    /**\n     * Maximum number of messages to keep in the retry queue. Older\n     * messages will be discarded when the queue is full.\n     */\n    maxSize?: number\n\n    /**\n     * The interval between each retry attempt\n     *\n     * @default '2s'\n     */\n    retryInterval?: Duration | false\n  }\n}\n"],"mappings":";AAkBO,IAAM,sBAAsB;AAAA;AAAA;AAAA;AAAA,EAIjC,KAAK;AAAA;AAAA;AAAA;AAAA,EAKL,OAAO;AAAA;AAAA;AAAA;AAAA,EAKP,QAAQ;AAAA;AAAA;AAAA;AAAA,EAKR,QAAQ;AACV;","names":[]}