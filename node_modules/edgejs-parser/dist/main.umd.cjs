(function(b,$){typeof exports=="object"&&typeof module<"u"?module.exports=$():typeof define=="function"&&define.amd?define($):(b=typeof globalThis<"u"?globalThis:b||self,b["edge-parser"]=$())})(this,function(){"use strict";var ta=b=>{throw TypeError(b)};var na=(b,$,w)=>$.has(b)||ta("Cannot "+w);var ra=(b,$,w)=>(na(b,$,"read from private field"),w?w.call(b):$.get(b)),Tr=(b,$,w)=>$.has(b)?ta("Cannot add the same private member more than once"):$ instanceof WeakSet?$.add(b):$.set(b,w);var mr=(b,$,w)=>(na(b,$,"access private method"),w);var En,St,Ar;var b=typeof global=="object"&&global&&global.Object===Object&&global,$=typeof self=="object"&&self&&self.Object===Object&&self,w=b||$||Function("return this")(),J=w.Symbol,Rr=Object.prototype,sa=Rr.hasOwnProperty,ia=Rr.toString,nt=J?J.toStringTag:void 0;function aa(t){var e=sa.call(t,nt),n=t[nt];try{t[nt]=void 0;var r=!0}catch{}var s=ia.call(t);return r&&(e?t[nt]=n:delete t[nt]),s}var oa=Object.prototype,ca=oa.toString;function ua(t){return ca.call(t)}var la="[object Null]",ha="[object Undefined]",Ir=J?J.toStringTag:void 0;function Pe(t){return t==null?t===void 0?ha:la:Ir&&Ir in Object(t)?aa(t):ua(t)}function ae(t){return t!=null&&typeof t=="object"}var fa="[object Symbol]";function Lt(t){return typeof t=="symbol"||ae(t)&&Pe(t)==fa}function yt(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var N=Array.isArray,Sr=J?J.prototype:void 0,_r=Sr?Sr.toString:void 0;function Or(t){if(typeof t=="string")return t;if(N(t))return yt(t,Or)+"";if(Lt(t))return _r?_r.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var da=/\s/;function pa(t){for(var e=t.length;e--&&da.test(t.charAt(e)););return e}var Ea=/^\s+/;function ga(t){return t&&t.slice(0,pa(t)+1).replace(Ea,"")}function ee(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Nr=NaN,Ta=/^[-+]0x[0-9a-f]+$/i,ma=/^0b[01]+$/i,Aa=/^0o[0-7]+$/i,Ra=parseInt;function Ia(t){if(typeof t=="number")return t;if(Lt(t))return Nr;if(ee(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ee(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=ga(t);var n=ma.test(t);return n||Aa.test(t)?Ra(t.slice(2),n?2:8):Ta.test(t)?Nr:+t}var Sa=1/0,_a=17976931348623157e292;function Oa(t){if(!t)return t===0?t:0;if(t=Ia(t),t===Sa||t===-1/0){var e=t<0?-1:1;return e*_a}return t===t?t:0}function vt(t){var e=Oa(t),n=e%1;return e===e?n?e-n:e:0}function Ve(t){return t}var Na="[object AsyncFunction]",Ca="[object Function]",La="[object GeneratorFunction]",ya="[object Proxy]";function Se(t){if(!ee(t))return!1;var e=Pe(t);return e==Ca||e==La||e==Na||e==ya}var mn=w["__core-js_shared__"],Cr=function(){var t=/[^.]+$/.exec(mn&&mn.keys&&mn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function va(t){return!!Cr&&Cr in t}var Pa=Function.prototype,Ma=Pa.toString;function De(t){if(t!=null){try{return Ma.call(t)}catch{}try{return t+""}catch{}}return""}var ka=/[\\^$.*+?()[\]{}|]/g,xa=/^\[object .+?Constructor\]$/,ba=Function.prototype,wa=Object.prototype,Ua=ba.toString,Fa=wa.hasOwnProperty,Da=RegExp("^"+Ua.call(Fa).replace(ka,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $a(t){if(!ee(t)||va(t))return!1;var e=Se(t)?Da:xa;return e.test(De(t))}function Ga(t,e){return t==null?void 0:t[e]}function $e(t,e){var n=Ga(t,e);return $a(n)?n:void 0}var An=$e(w,"WeakMap"),Lr=Object.create,Ba=function(){function t(){}return function(e){if(!ee(e))return{};if(Lr)return Lr(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Ha(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function U(){}function Ka(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Wa=800,ja=16,za=Date.now;function Va(t){var e=0,n=0;return function(){var r=za(),s=ja-(r-n);if(n=r,s>0){if(++e>=Wa)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Ya(t){return function(){return t}}var Pt=function(){try{var t=$e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Xa=Pt?function(t,e){return Pt(t,"toString",{configurable:!0,enumerable:!1,value:Ya(e),writable:!0})}:Ve,qa=Va(Xa);function yr(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function vr(t,e,n,r){for(var s=t.length,i=n+-1;++i<s;)if(e(t[i],i,t))return i;return-1}function Za(t){return t!==t}function Qa(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}function Rn(t,e,n){return e===e?Qa(t,e,n):vr(t,Za,n)}function Pr(t,e){var n=t==null?0:t.length;return!!n&&Rn(t,e,0)>-1}var Ja=9007199254740991,eo=/^(?:0|[1-9]\d*)$/;function Mt(t,e){var n=typeof t;return e=e??Ja,!!e&&(n=="number"||n!="symbol"&&eo.test(t))&&t>-1&&t%1==0&&t<e}function In(t,e,n){e=="__proto__"&&Pt?Pt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function rt(t,e){return t===e||t!==t&&e!==e}var to=Object.prototype,no=to.hasOwnProperty;function kt(t,e,n){var r=t[e];(!(no.call(t,e)&&rt(r,n))||n===void 0&&!(e in t))&&In(t,e,n)}function Sn(t,e,n,r){var s=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var o=e[i],c=void 0;c===void 0&&(c=t[o]),s?In(n,o,c):kt(n,o,c)}return n}var Mr=Math.max;function ro(t,e,n){return e=Mr(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=Mr(r.length-e,0),a=Array(i);++s<i;)a[s]=r[e+s];s=-1;for(var o=Array(e+1);++s<e;)o[s]=r[s];return o[e]=n(a),Ha(t,this,o)}}function _n(t,e){return qa(ro(t,e,Ve),t+"")}var so=9007199254740991;function On(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=so}function Ee(t){return t!=null&&On(t.length)&&!Se(t)}function kr(t,e,n){if(!ee(n))return!1;var r=typeof e;return(r=="number"?Ee(n)&&Mt(e,n.length):r=="string"&&e in n)?rt(n[e],t):!1}function io(t){return _n(function(e,n){var r=-1,s=n.length,i=s>1?n[s-1]:void 0,a=s>2?n[2]:void 0;for(i=t.length>3&&typeof i=="function"?(s--,i):void 0,a&&kr(n[0],n[1],a)&&(i=s<3?void 0:i,s=1),e=Object(e);++r<s;){var o=n[r];o&&t(e,o,r,i)}return e})}var ao=Object.prototype;function st(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||ao;return t===n}function oo(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var co="[object Arguments]";function xr(t){return ae(t)&&Pe(t)==co}var br=Object.prototype,uo=br.hasOwnProperty,lo=br.propertyIsEnumerable,xt=xr(function(){return arguments}())?xr:function(t){return ae(t)&&uo.call(t,"callee")&&!lo.call(t,"callee")};function ho(){return!1}var wr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ur=wr&&typeof module=="object"&&module&&!module.nodeType&&module,fo=Ur&&Ur.exports===wr,Fr=fo?w.Buffer:void 0,po=Fr?Fr.isBuffer:void 0,it=po||ho,Eo="[object Arguments]",go="[object Array]",To="[object Boolean]",mo="[object Date]",Ao="[object Error]",Ro="[object Function]",Io="[object Map]",So="[object Number]",_o="[object Object]",Oo="[object RegExp]",No="[object Set]",Co="[object String]",Lo="[object WeakMap]",yo="[object ArrayBuffer]",vo="[object DataView]",Po="[object Float32Array]",Mo="[object Float64Array]",ko="[object Int8Array]",xo="[object Int16Array]",bo="[object Int32Array]",wo="[object Uint8Array]",Uo="[object Uint8ClampedArray]",Fo="[object Uint16Array]",Do="[object Uint32Array]",P={};P[Po]=P[Mo]=P[ko]=P[xo]=P[bo]=P[wo]=P[Uo]=P[Fo]=P[Do]=!0,P[Eo]=P[go]=P[yo]=P[To]=P[vo]=P[mo]=P[Ao]=P[Ro]=P[Io]=P[So]=P[_o]=P[Oo]=P[No]=P[Co]=P[Lo]=!1;function $o(t){return ae(t)&&On(t.length)&&!!P[Pe(t)]}function bt(t){return function(e){return t(e)}}var Dr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,at=Dr&&typeof module=="object"&&module&&!module.nodeType&&module,Go=at&&at.exports===Dr,Nn=Go&&b.process,Me=function(){try{var t=at&&at.require&&at.require("util").types;return t||Nn&&Nn.binding&&Nn.binding("util")}catch{}}(),$r=Me&&Me.isTypedArray,Cn=$r?bt($r):$o,Bo=Object.prototype,Ho=Bo.hasOwnProperty;function Gr(t,e){var n=N(t),r=!n&&xt(t),s=!n&&!r&&it(t),i=!n&&!r&&!s&&Cn(t),a=n||r||s||i,o=a?oo(t.length,String):[],c=o.length;for(var u in t)(e||Ho.call(t,u))&&!(a&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Mt(u,c)))&&o.push(u);return o}function Br(t,e){return function(n){return t(e(n))}}var Ko=Br(Object.keys,Object),Wo=Object.prototype,jo=Wo.hasOwnProperty;function Hr(t){if(!st(t))return Ko(t);var e=[];for(var n in Object(t))jo.call(t,n)&&n!="constructor"&&e.push(n);return e}function te(t){return Ee(t)?Gr(t):Hr(t)}var zo=Object.prototype,Vo=zo.hasOwnProperty,X=io(function(t,e){if(st(e)||Ee(e)){Sn(e,te(e),t);return}for(var n in e)Vo.call(e,n)&&kt(t,n,e[n])});function Yo(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Xo=Object.prototype,qo=Xo.hasOwnProperty;function Zo(t){if(!ee(t))return Yo(t);var e=st(t),n=[];for(var r in t)r=="constructor"&&(e||!qo.call(t,r))||n.push(r);return n}function Kr(t){return Ee(t)?Gr(t,!0):Zo(t)}var Qo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jo=/^\w*$/;function Ln(t,e){if(N(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Lt(t)?!0:Jo.test(t)||!Qo.test(t)||e!=null&&t in Object(e)}var ot=$e(Object,"create");function ec(){this.__data__=ot?ot(null):{},this.size=0}function tc(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var nc="__lodash_hash_undefined__",rc=Object.prototype,sc=rc.hasOwnProperty;function ic(t){var e=this.__data__;if(ot){var n=e[t];return n===nc?void 0:n}return sc.call(e,t)?e[t]:void 0}var ac=Object.prototype,oc=ac.hasOwnProperty;function cc(t){var e=this.__data__;return ot?e[t]!==void 0:oc.call(e,t)}var uc="__lodash_hash_undefined__";function lc(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ot&&e===void 0?uc:e,this}function Ge(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ge.prototype.clear=ec,Ge.prototype.delete=tc,Ge.prototype.get=ic,Ge.prototype.has=cc,Ge.prototype.set=lc;function hc(){this.__data__=[],this.size=0}function wt(t,e){for(var n=t.length;n--;)if(rt(t[n][0],e))return n;return-1}var fc=Array.prototype,dc=fc.splice;function pc(t){var e=this.__data__,n=wt(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():dc.call(e,n,1),--this.size,!0}function Ec(t){var e=this.__data__,n=wt(e,t);return n<0?void 0:e[n][1]}function gc(t){return wt(this.__data__,t)>-1}function Tc(t,e){var n=this.__data__,r=wt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function _e(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_e.prototype.clear=hc,_e.prototype.delete=pc,_e.prototype.get=Ec,_e.prototype.has=gc,_e.prototype.set=Tc;var ct=$e(w,"Map");function mc(){this.size=0,this.__data__={hash:new Ge,map:new(ct||_e),string:new Ge}}function Ac(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ut(t,e){var n=t.__data__;return Ac(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Rc(t){var e=Ut(this,t).delete(t);return this.size-=e?1:0,e}function Ic(t){return Ut(this,t).get(t)}function Sc(t){return Ut(this,t).has(t)}function _c(t,e){var n=Ut(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Oe(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Oe.prototype.clear=mc,Oe.prototype.delete=Rc,Oe.prototype.get=Ic,Oe.prototype.has=Sc,Oe.prototype.set=_c;var Oc="Expected a function";function yn(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Oc);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var a=t.apply(this,r);return n.cache=i.set(s,a)||i,a};return n.cache=new(yn.Cache||Oe),n}yn.Cache=Oe;var Nc=500;function Cc(t){var e=yn(t,function(r){return n.size===Nc&&n.clear(),r}),n=e.cache;return e}var Lc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yc=/\\(\\)?/g,vc=Cc(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Lc,function(n,r,s,i){e.push(s?i.replace(yc,"$1"):r||n)}),e});function Pc(t){return t==null?"":Or(t)}function Ft(t,e){return N(t)?t:Ln(t,e)?[t]:vc(Pc(t))}function ut(t){if(typeof t=="string"||Lt(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function vn(t,e){e=Ft(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[ut(e[n++])];return n&&n==r?t:void 0}function Mc(t,e,n){var r=t==null?void 0:vn(t,e);return r===void 0?n:r}function Pn(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var Wr=J?J.isConcatSpreadable:void 0;function kc(t){return N(t)||xt(t)||!!(Wr&&t&&t[Wr])}function Mn(t,e,n,r,s){var i=-1,a=t.length;for(n||(n=kc),s||(s=[]);++i<a;){var o=t[i];n(o)?Pn(s,o):r||(s[s.length]=o)}return s}function oe(t){var e=t==null?0:t.length;return e?Mn(t):[]}var jr=Br(Object.getPrototypeOf,Object);function zr(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=t[r+e];return i}function xc(t,e,n,r){var s=-1,i=t==null?0:t.length;for(r&&i&&(n=t[++s]);++s<i;)n=e(n,t[s],s,t);return n}function bc(){this.__data__=new _e,this.size=0}function wc(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Uc(t){return this.__data__.get(t)}function Fc(t){return this.__data__.has(t)}var Dc=200;function $c(t,e){var n=this.__data__;if(n instanceof _e){var r=n.__data__;if(!ct||r.length<Dc-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Oe(r)}return n.set(t,e),this.size=n.size,this}function ge(t){var e=this.__data__=new _e(t);this.size=e.size}ge.prototype.clear=bc,ge.prototype.delete=wc,ge.prototype.get=Uc,ge.prototype.has=Fc,ge.prototype.set=$c;function Gc(t,e){return t&&Sn(e,te(e),t)}var Vr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Yr=Vr&&typeof module=="object"&&module&&!module.nodeType&&module,Bc=Yr&&Yr.exports===Vr,Xr=Bc?w.Buffer:void 0,qr=Xr?Xr.allocUnsafe:void 0;function Hc(t,e){var n=t.length,r=qr?qr(n):new t.constructor(n);return t.copy(r),r}function kn(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[s++]=a)}return i}function Zr(){return[]}var Kc=Object.prototype,Wc=Kc.propertyIsEnumerable,Qr=Object.getOwnPropertySymbols,xn=Qr?function(t){return t==null?[]:(t=Object(t),kn(Qr(t),function(e){return Wc.call(t,e)}))}:Zr;function jc(t,e){return Sn(t,xn(t),e)}var zc=Object.getOwnPropertySymbols,Vc=zc?function(t){for(var e=[];t;)Pn(e,xn(t)),t=jr(t);return e}:Zr;function Jr(t,e,n){var r=e(t);return N(t)?r:Pn(r,n(t))}function bn(t){return Jr(t,te,xn)}function Yc(t){return Jr(t,Kr,Vc)}var wn=$e(w,"DataView"),Un=$e(w,"Promise"),Ye=$e(w,"Set"),es="[object Map]",Xc="[object Object]",ts="[object Promise]",ns="[object Set]",rs="[object WeakMap]",ss="[object DataView]",qc=De(wn),Zc=De(ct),Qc=De(Un),Jc=De(Ye),eu=De(An),ne=Pe;(wn&&ne(new wn(new ArrayBuffer(1)))!=ss||ct&&ne(new ct)!=es||Un&&ne(Un.resolve())!=ts||Ye&&ne(new Ye)!=ns||An&&ne(new An)!=rs)&&(ne=function(t){var e=Pe(t),n=e==Xc?t.constructor:void 0,r=n?De(n):"";if(r)switch(r){case qc:return ss;case Zc:return es;case Qc:return ts;case Jc:return ns;case eu:return rs}return e});var tu=Object.prototype,nu=tu.hasOwnProperty;function ru(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&nu.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Dt=w.Uint8Array;function su(t){var e=new t.constructor(t.byteLength);return new Dt(e).set(new Dt(t)),e}function iu(t,e){var n=t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var au=/\w*$/;function ou(t){var e=new t.constructor(t.source,au.exec(t));return e.lastIndex=t.lastIndex,e}var is=J?J.prototype:void 0,as=is?is.valueOf:void 0;function cu(t){return as?Object(as.call(t)):{}}function uu(t,e){var n=t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var lu="[object Boolean]",hu="[object Date]",fu="[object Map]",du="[object Number]",pu="[object RegExp]",Eu="[object Set]",gu="[object String]",Tu="[object Symbol]",mu="[object ArrayBuffer]",Au="[object DataView]",Ru="[object Float32Array]",Iu="[object Float64Array]",Su="[object Int8Array]",_u="[object Int16Array]",Ou="[object Int32Array]",Nu="[object Uint8Array]",Cu="[object Uint8ClampedArray]",Lu="[object Uint16Array]",yu="[object Uint32Array]";function vu(t,e,n){var r=t.constructor;switch(e){case mu:return su(t);case lu:case hu:return new r(+t);case Au:return iu(t);case Ru:case Iu:case Su:case _u:case Ou:case Nu:case Cu:case Lu:case yu:return uu(t);case fu:return new r;case du:case gu:return new r(t);case pu:return ou(t);case Eu:return new r;case Tu:return cu(t)}}function Pu(t){return typeof t.constructor=="function"&&!st(t)?Ba(jr(t)):{}}var Mu="[object Map]";function ku(t){return ae(t)&&ne(t)==Mu}var os=Me&&Me.isMap,xu=os?bt(os):ku,bu="[object Set]";function wu(t){return ae(t)&&ne(t)==bu}var cs=Me&&Me.isSet,Uu=cs?bt(cs):wu,us="[object Arguments]",Fu="[object Array]",Du="[object Boolean]",$u="[object Date]",Gu="[object Error]",ls="[object Function]",Bu="[object GeneratorFunction]",Hu="[object Map]",Ku="[object Number]",hs="[object Object]",Wu="[object RegExp]",ju="[object Set]",zu="[object String]",Vu="[object Symbol]",Yu="[object WeakMap]",Xu="[object ArrayBuffer]",qu="[object DataView]",Zu="[object Float32Array]",Qu="[object Float64Array]",Ju="[object Int8Array]",el="[object Int16Array]",tl="[object Int32Array]",nl="[object Uint8Array]",rl="[object Uint8ClampedArray]",sl="[object Uint16Array]",il="[object Uint32Array]",y={};y[us]=y[Fu]=y[Xu]=y[qu]=y[Du]=y[$u]=y[Zu]=y[Qu]=y[Ju]=y[el]=y[tl]=y[Hu]=y[Ku]=y[hs]=y[Wu]=y[ju]=y[zu]=y[Vu]=y[nl]=y[rl]=y[sl]=y[il]=!0,y[Gu]=y[ls]=y[Yu]=!1;function $t(t,e,n,r,s,i){var a;if(a!==void 0)return a;if(!ee(t))return t;var o=N(t);if(o)return a=ru(t),Ka(t,a);var c=ne(t),u=c==ls||c==Bu;if(it(t))return Hc(t);if(c==hs||c==us||u&&!s)return a=u?{}:Pu(t),jc(t,Gc(a,t));if(!y[c])return s?t:{};a=vu(t,c),i||(i=new ge);var l=i.get(t);if(l)return l;i.set(t,a),Uu(t)?t.forEach(function(p){a.add($t(p,e,n,p,t,i))}):xu(t)&&t.forEach(function(p,T){a.set(T,$t(p,e,n,T,t,i))});var h=bn,f=o?void 0:h(t);return yr(f||t,function(p,T){f&&(T=p,p=t[T]),kt(a,T,$t(p,e,n,T,t,i))}),a}var al=4;function G(t){return $t(t,al)}function lt(t){for(var e=-1,n=t==null?0:t.length,r=0,s=[];++e<n;){var i=t[e];i&&(s[r++]=i)}return s}var ol="__lodash_hash_undefined__";function cl(t){return this.__data__.set(t,ol),this}function ul(t){return this.__data__.has(t)}function Xe(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Oe;++e<n;)this.add(t[e])}Xe.prototype.add=Xe.prototype.push=cl,Xe.prototype.has=ul;function fs(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Fn(t,e){return t.has(e)}var ll=1,hl=2;function ds(t,e,n,r,s,i){var a=n&ll,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var u=i.get(t),l=i.get(e);if(u&&l)return u==e&&l==t;var h=-1,f=!0,p=n&hl?new Xe:void 0;for(i.set(t,e),i.set(e,t);++h<o;){var T=t[h],I=e[h];if(r)var O=a?r(I,T,h,e,t,i):r(T,I,h,t,e,i);if(O!==void 0){if(O)continue;f=!1;break}if(p){if(!fs(e,function(g,E){if(!Fn(p,E)&&(T===g||s(T,g,n,r,i)))return p.push(E)})){f=!1;break}}else if(!(T===I||s(T,I,n,r,i))){f=!1;break}}return i.delete(t),i.delete(e),f}function fl(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}function Dn(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var dl=1,pl=2,El="[object Boolean]",gl="[object Date]",Tl="[object Error]",ml="[object Map]",Al="[object Number]",Rl="[object RegExp]",Il="[object Set]",Sl="[object String]",_l="[object Symbol]",Ol="[object ArrayBuffer]",Nl="[object DataView]",ps=J?J.prototype:void 0,$n=ps?ps.valueOf:void 0;function Cl(t,e,n,r,s,i,a){switch(n){case Nl:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ol:return!(t.byteLength!=e.byteLength||!i(new Dt(t),new Dt(e)));case El:case gl:case Al:return rt(+t,+e);case Tl:return t.name==e.name&&t.message==e.message;case Rl:case Sl:return t==e+"";case ml:var o=fl;case Il:var c=r&dl;if(o||(o=Dn),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;r|=pl,a.set(t,e);var l=ds(o(t),o(e),r,s,i,a);return a.delete(t),l;case _l:if($n)return $n.call(t)==$n.call(e)}return!1}var Ll=1,yl=Object.prototype,vl=yl.hasOwnProperty;function Pl(t,e,n,r,s,i){var a=n&Ll,o=bn(t),c=o.length,u=bn(e),l=u.length;if(c!=l&&!a)return!1;for(var h=c;h--;){var f=o[h];if(!(a?f in e:vl.call(e,f)))return!1}var p=i.get(t),T=i.get(e);if(p&&T)return p==e&&T==t;var I=!0;i.set(t,e),i.set(e,t);for(var O=a;++h<c;){f=o[h];var g=t[f],E=e[f];if(r)var d=a?r(E,g,f,e,t,i):r(g,E,f,t,e,i);if(!(d===void 0?g===E||s(g,E,n,r,i):d)){I=!1;break}O||(O=f=="constructor")}if(I&&!O){var m=t.constructor,L=e.constructor;m!=L&&"constructor"in t&&"constructor"in e&&!(typeof m=="function"&&m instanceof m&&typeof L=="function"&&L instanceof L)&&(I=!1)}return i.delete(t),i.delete(e),I}var Ml=1,Es="[object Arguments]",gs="[object Array]",Gt="[object Object]",kl=Object.prototype,Ts=kl.hasOwnProperty;function xl(t,e,n,r,s,i){var a=N(t),o=N(e),c=a?gs:ne(t),u=o?gs:ne(e);c=c==Es?Gt:c,u=u==Es?Gt:u;var l=c==Gt,h=u==Gt,f=c==u;if(f&&it(t)){if(!it(e))return!1;a=!0,l=!1}if(f&&!l)return i||(i=new ge),a||Cn(t)?ds(t,e,n,r,s,i):Cl(t,e,c,n,r,s,i);if(!(n&Ml)){var p=l&&Ts.call(t,"__wrapped__"),T=h&&Ts.call(e,"__wrapped__");if(p||T){var I=p?t.value():t,O=T?e.value():e;return i||(i=new ge),s(I,O,n,r,i)}}return f?(i||(i=new ge),Pl(t,e,n,r,s,i)):!1}function Gn(t,e,n,r,s){return t===e?!0:t==null||e==null||!ae(t)&&!ae(e)?t!==t&&e!==e:xl(t,e,n,r,Gn,s)}var bl=1,wl=2;function Ul(t,e,n,r){var s=n.length,i=s;if(t==null)return!i;for(t=Object(t);s--;){var a=n[s];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++s<i;){a=n[s];var o=a[0],c=t[o],u=a[1];if(a[2]){if(c===void 0&&!(o in t))return!1}else{var l=new ge,h;if(!(h===void 0?Gn(u,c,bl|wl,r,l):h))return!1}}return!0}function ms(t){return t===t&&!ee(t)}function Fl(t){for(var e=te(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,ms(s)]}return e}function As(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function Dl(t){var e=Fl(t);return e.length==1&&e[0][2]?As(e[0][0],e[0][1]):function(n){return n===t||Ul(n,t,e)}}function $l(t,e){return t!=null&&e in Object(t)}function Rs(t,e,n){e=Ft(e,t);for(var r=-1,s=e.length,i=!1;++r<s;){var a=ut(e[r]);if(!(i=t!=null&&n(t,a)))break;t=t[a]}return i||++r!=s?i:(s=t==null?0:t.length,!!s&&On(s)&&Mt(a,s)&&(N(t)||xt(t)))}function Gl(t,e){return t!=null&&Rs(t,e,$l)}var Bl=1,Hl=2;function Kl(t,e){return Ln(t)&&ms(e)?As(ut(t),e):function(n){var r=Mc(n,t);return r===void 0&&r===e?Gl(n,t):Gn(e,r,Bl|Hl)}}function Wl(t){return function(e){return e==null?void 0:e[t]}}function jl(t){return function(e){return vn(e,t)}}function zl(t){return Ln(t)?Wl(ut(t)):jl(t)}function Te(t){return typeof t=="function"?t:t==null?Ve:typeof t=="object"?N(t)?Kl(t[0],t[1]):Dl(t):zl(t)}function Vl(t,e,n,r){for(var s=-1,i=t==null?0:t.length;++s<i;){var a=t[s];e(r,a,n(a),t)}return r}function Yl(t){return function(e,n,r){for(var s=-1,i=Object(e),a=r(e),o=a.length;o--;){var c=a[++s];if(n(i[c],c,i)===!1)break}return e}}var Xl=Yl();function ql(t,e){return t&&Xl(t,e,te)}function Zl(t,e){return function(n,r){if(n==null)return n;if(!Ee(n))return t(n,r);for(var s=n.length,i=-1,a=Object(n);++i<s&&r(a[i],i,a)!==!1;);return n}}var Be=Zl(ql);function Ql(t,e,n,r){return Be(t,function(s,i,a){e(r,s,n(s),a)}),r}function Jl(t,e){return function(n,r){var s=N(n)?Vl:Ql,i=e?e():{};return s(n,t,Te(r),i)}}var Is=Object.prototype,eh=Is.hasOwnProperty,Bn=_n(function(t,e){t=Object(t);var n=-1,r=e.length,s=r>2?e[2]:void 0;for(s&&kr(e[0],e[1],s)&&(r=1);++n<r;)for(var i=e[n],a=Kr(i),o=-1,c=a.length;++o<c;){var u=a[o],l=t[u];(l===void 0||rt(l,Is[u])&&!eh.call(t,u))&&(t[u]=i[u])}return t});function Ss(t){return ae(t)&&Ee(t)}var th=200;function nh(t,e,n,r){var s=-1,i=Pr,a=!0,o=t.length,c=[],u=e.length;if(!o)return c;e.length>=th&&(i=Fn,a=!1,e=new Xe(e));e:for(;++s<o;){var l=t[s],h=l;if(l=l!==0?l:0,a&&h===h){for(var f=u;f--;)if(e[f]===h)continue e;c.push(l)}else i(e,h,r)||c.push(l)}return c}var Bt=_n(function(t,e){return Ss(t)?nh(t,Mn(e,1,Ss,!0)):[]});function qe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function B(t,e,n){var r=t==null?0:t.length;return r?(e=e===void 0?1:vt(e),zr(t,e<0?0:e,r)):[]}function ht(t,e,n){var r=t==null?0:t.length;return r?(e=e===void 0?1:vt(e),e=r-e,zr(t,0,e<0?0:e)):[]}function rh(t){return typeof t=="function"?t:Ve}function S(t,e){var n=N(t)?yr:Be;return n(t,rh(e))}function sh(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ih(t,e){var n=!0;return Be(t,function(r,s,i){return n=!!e(r,s,i),n}),n}function ce(t,e,n){var r=N(t)?sh:ih;return r(t,Te(e))}function _s(t,e){var n=[];return Be(t,function(r,s,i){e(r,s,i)&&n.push(r)}),n}function re(t,e){var n=N(t)?kn:_s;return n(t,Te(e))}function ah(t){return function(e,n,r){var s=Object(e);if(!Ee(e)){var i=Te(n);e=te(e),n=function(o){return i(s[o],o,s)}}var a=t(e,n,r);return a>-1?s[i?e[a]:a]:void 0}}var oh=Math.max;function ch(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=n==null?0:vt(n);return s<0&&(s=oh(r+s,0)),vr(t,Te(e),s)}var Ze=ah(ch);function ue(t){return t&&t.length?t[0]:void 0}function uh(t,e){var n=-1,r=Ee(t)?Array(t.length):[];return Be(t,function(s,i,a){r[++n]=e(s,i,a)}),r}function A(t,e){var n=N(t)?yt:uh;return n(t,Te(e))}function se(t,e){return Mn(A(t,e))}var lh=Object.prototype,hh=lh.hasOwnProperty,fh=Jl(function(t,e,n){hh.call(t,n)?t[n].push(e):In(t,n,[e])}),dh=Object.prototype,ph=dh.hasOwnProperty;function Eh(t,e){return t!=null&&ph.call(t,e)}function R(t,e){return t!=null&&Rs(t,e,Eh)}var gh="[object String]";function z(t){return typeof t=="string"||!N(t)&&ae(t)&&Pe(t)==gh}function Th(t,e){return yt(e,function(n){return t[n]})}function F(t){return t==null?[]:Th(t,te(t))}var mh=Math.max;function K(t,e,n,r){t=Ee(t)?t:F(t),n=n?vt(n):0;var s=t.length;return n<0&&(n=mh(s+n,0)),z(t)?n<=s&&t.indexOf(e,n)>-1:!!s&&Rn(t,e,n)>-1}function Os(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=0;return Rn(t,e,s)}var Ah="[object Map]",Rh="[object Set]",Ih=Object.prototype,Sh=Ih.hasOwnProperty;function v(t){if(t==null)return!0;if(Ee(t)&&(N(t)||typeof t=="string"||typeof t.splice=="function"||it(t)||Cn(t)||xt(t)))return!t.length;var e=ne(t);if(e==Ah||e==Rh)return!t.size;if(st(t))return!Hr(t).length;for(var n in t)if(Sh.call(t,n))return!1;return!0}var _h="[object RegExp]";function Oh(t){return ae(t)&&Pe(t)==_h}var Ns=Me&&Me.isRegExp,Ne=Ns?bt(Ns):Oh;function Ce(t){return t===void 0}var Nh="Expected a function";function Ch(t){if(typeof t!="function")throw new TypeError(Nh);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Lh(t,e,n,r){if(!ee(t))return t;e=Ft(e,t);for(var s=-1,i=e.length,a=i-1,o=t;o!=null&&++s<i;){var c=ut(e[s]),u=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(s!=a){var l=o[c];u=void 0,u===void 0&&(u=ee(l)?l:Mt(e[s+1])?[]:{})}kt(o,c,u),o=o[c]}return t}function yh(t,e,n){for(var r=-1,s=e.length,i={};++r<s;){var a=e[r],o=vn(t,a);n(o,a)&&Lh(i,Ft(a,t),o)}return i}function le(t,e){if(t==null)return{};var n=yt(Yc(t),function(r){return[r]});return e=Te(e),yh(t,n,function(r,s){return e(r,s[0])})}function vh(t,e,n,r,s){return s(t,function(i,a,o){n=r?(r=!1,i):e(n,i,a,o)}),n}function q(t,e,n){var r=N(t)?xc:vh,s=arguments.length<3;return r(t,Te(e),n,s,Be)}function Ht(t,e){var n=N(t)?kn:_s;return n(t,Ch(Te(e)))}function Ph(t,e){var n;return Be(t,function(r,s,i){return n=e(r,s,i),!n}),!!n}function Cs(t,e,n){var r=N(t)?fs:Ph;return r(t,Te(e))}var Mh=1/0,kh=Ye&&1/Dn(new Ye([,-0]))[1]==Mh?function(t){return new Ye(t)}:U,xh=200;function bh(t,e,n){var r=-1,s=Pr,i=t.length,a=!0,o=[],c=o;if(i>=xh){var u=kh(t);if(u)return Dn(u);a=!1,s=Fn,c=new Xe}else c=o;e:for(;++r<i;){var l=t[r],h=l;if(l=l!==0?l:0,a&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;o.push(l)}else s(c,h,n)||(c!==o&&c.push(h),o.push(l))}return o}function Hn(t){return t&&t.length?bh(t):[]}function Kn(t){console&&console.error&&console.error(`Error: ${t}`)}function Ls(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function ys(t){const e=new Date().getTime(),n=t();return{time:new Date().getTime()-e,value:n}}function vs(t){function e(){}e.prototype=t;const n=new e;function r(){return typeof n.bar}return r(),r(),t}function wh(t){return Uh(t)?t.LABEL:t.name}function Uh(t){return z(t.LABEL)&&t.LABEL!==""}class me{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),S(this.definition,n=>{n.accept(e)})}}class Z extends me{constructor(e){super([]),this.idx=1,X(this,le(e,n=>n!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class Qe extends me{constructor(e){super(e.definition),this.orgText="",X(this,le(e,n=>n!==void 0))}}class V extends me{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,X(this,le(e,n=>n!==void 0))}}class Y extends me{constructor(e){super(e.definition),this.idx=1,X(this,le(e,n=>n!==void 0))}}class Ae extends me{constructor(e){super(e.definition),this.idx=1,X(this,le(e,n=>n!==void 0))}}class Re extends me{constructor(e){super(e.definition),this.idx=1,X(this,le(e,n=>n!==void 0))}}class D extends me{constructor(e){super(e.definition),this.idx=1,X(this,le(e,n=>n!==void 0))}}class he extends me{constructor(e){super(e.definition),this.idx=1,X(this,le(e,n=>n!==void 0))}}class fe extends me{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,X(this,le(e,n=>n!==void 0))}}class M{constructor(e){this.idx=1,X(this,le(e,n=>n!==void 0))}accept(e){e.visit(this)}}function Fh(t){return A(t,Kt)}function Kt(t){function e(n){return A(n,Kt)}if(t instanceof Z){const n={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return z(t.label)&&(n.label=t.label),n}else{if(t instanceof V)return{type:"Alternative",definition:e(t.definition)};if(t instanceof Y)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof Ae)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Re)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Kt(new M({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof he)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Kt(new M({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof D)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof fe)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof M){const n={type:"Terminal",name:t.terminalType.name,label:wh(t.terminalType),idx:t.idx};z(t.label)&&(n.terminalLabel=t.label);const r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=Ne(r)?r.source:r),n}else{if(t instanceof Qe)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}class Je{visit(e){const n=e;switch(n.constructor){case Z:return this.visitNonTerminal(n);case V:return this.visitAlternative(n);case Y:return this.visitOption(n);case Ae:return this.visitRepetitionMandatory(n);case Re:return this.visitRepetitionMandatoryWithSeparator(n);case he:return this.visitRepetitionWithSeparator(n);case D:return this.visitRepetition(n);case fe:return this.visitAlternation(n);case M:return this.visitTerminal(n);case Qe:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function Dh(t){return t instanceof V||t instanceof Y||t instanceof D||t instanceof Ae||t instanceof Re||t instanceof he||t instanceof M||t instanceof Qe}function Wt(t,e=[]){return t instanceof Y||t instanceof D||t instanceof he?!0:t instanceof fe?Cs(t.definition,r=>Wt(r,e)):t instanceof Z&&K(e,t)?!1:t instanceof me?(t instanceof Z&&e.push(t),ce(t.definition,r=>Wt(r,e))):!1}function $h(t){return t instanceof fe}function Ie(t){if(t instanceof Z)return"SUBRULE";if(t instanceof Y)return"OPTION";if(t instanceof fe)return"OR";if(t instanceof Ae)return"AT_LEAST_ONE";if(t instanceof Re)return"AT_LEAST_ONE_SEP";if(t instanceof he)return"MANY_SEP";if(t instanceof D)return"MANY";if(t instanceof M)return"CONSUME";throw Error("non exhaustive match")}class jt{walk(e,n=[]){S(e.definition,(r,s)=>{const i=B(e.definition,s+1);if(r instanceof Z)this.walkProdRef(r,i,n);else if(r instanceof M)this.walkTerminal(r,i,n);else if(r instanceof V)this.walkFlat(r,i,n);else if(r instanceof Y)this.walkOption(r,i,n);else if(r instanceof Ae)this.walkAtLeastOne(r,i,n);else if(r instanceof Re)this.walkAtLeastOneSep(r,i,n);else if(r instanceof he)this.walkManySep(r,i,n);else if(r instanceof D)this.walkMany(r,i,n);else if(r instanceof fe)this.walkOr(r,i,n);else throw Error("non exhaustive match")})}walkTerminal(e,n,r){}walkProdRef(e,n,r){}walkFlat(e,n,r){const s=n.concat(r);this.walk(e,s)}walkOption(e,n,r){const s=n.concat(r);this.walk(e,s)}walkAtLeastOne(e,n,r){const s=[new Y({definition:e.definition})].concat(n,r);this.walk(e,s)}walkAtLeastOneSep(e,n,r){const s=Ps(e,n,r);this.walk(e,s)}walkMany(e,n,r){const s=[new Y({definition:e.definition})].concat(n,r);this.walk(e,s)}walkManySep(e,n,r){const s=Ps(e,n,r);this.walk(e,s)}walkOr(e,n,r){const s=n.concat(r);S(e.definition,i=>{const a=new V({definition:[i]});this.walk(a,s)})}}function Ps(t,e,n){return[new Y({definition:[new M({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}function ft(t){if(t instanceof Z)return ft(t.referencedRule);if(t instanceof M)return Hh(t);if(Dh(t))return Gh(t);if($h(t))return Bh(t);throw Error("non exhaustive match")}function Gh(t){let e=[];const n=t.definition;let r=0,s=n.length>r,i,a=!0;for(;s&&a;)i=n[r],a=Wt(i),e=e.concat(ft(i)),r=r+1,s=n.length>r;return Hn(e)}function Bh(t){const e=A(t.definition,n=>ft(n));return Hn(oe(e))}function Hh(t){return[t.terminalType]}const Ms="_~IN~_";class Kh extends jt{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,n,r){}walkProdRef(e,n,r){const s=jh(e.referencedRule,e.idx)+this.topProd.name,i=n.concat(r),a=new V({definition:i}),o=ft(a);this.follows[s]=o}}function Wh(t){const e={};return S(t,n=>{const r=new Kh(n).startWalking();X(e,r)}),e}function jh(t,e){return t.name+e+Ms}function _(t){return t.charCodeAt(0)}function Wn(t,e){Array.isArray(t)?t.forEach(function(n){e.push(n)}):e.push(t)}function dt(t,e){if(t[e]===!0)throw"duplicate flag "+e;t[e],t[e]=!0}function et(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function zh(){throw Error("Internal Error - Should never get here!")}function ks(t){return t.type==="Character"}const zt=[];for(let t=_("0");t<=_("9");t++)zt.push(t);const Vt=[_("_")].concat(zt);for(let t=_("a");t<=_("z");t++)Vt.push(t);for(let t=_("A");t<=_("Z");t++)Vt.push(t);const xs=[_(" "),_("\f"),_(`
`),_("\r"),_("	"),_("\v"),_("	"),_(" "),_(" "),_(" "),_(" "),_(" "),_(" "),_(" "),_(" "),_(" "),_(" "),_(" "),_(" "),_(" "),_("\u2028"),_("\u2029"),_(" "),_(" "),_("　"),_("\uFEFF")],Vh=/[0-9a-fA-F]/,Yt=/[0-9]/,Yh=/[1-9]/;class Xh{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const n=this.disjunction();this.consumeChar("/");const r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":dt(r,"global");break;case"i":dt(r,"ignoreCase");break;case"m":dt(r,"multiLine");break;case"u":dt(r,"unicode");break;case"y":dt(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:n,loc:this.loc(0)}}disjunction(){const e=[],n=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(n)}}alternative(){const e=[],n=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break}et(n);const r=this.disjunction();return this.consumeChar(")"),{type:n,value:r,loc:this.loc(e)}}return zh()}quantifier(e=!1){let n;const r=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":const s=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:s,atMost:s};break;case",":let i;this.isDigit()?(i=this.integerIncludingZero(),n={atLeast:s,atMost:i}):n={atLeast:s,atMost:1/0},this.consumeChar("}");break}if(e===!0&&n===void 0)return;et(n);break}if(!(e===!0&&n===void 0)&&et(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(r),n}atom(){let e;const n=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),et(e))return e.loc=this.loc(n),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[_(`
`),_("\r"),_("\u2028"),_("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,n=!1;switch(this.popChar()){case"d":e=zt;break;case"D":e=zt,n=!0;break;case"s":e=xs;break;case"S":e=xs,n=!0;break;case"w":e=Vt;break;case"W":e=Vt,n=!0;break}if(et(e))return{type:"Set",value:e,complement:n}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=_("\f");break;case"n":e=_(`
`);break;case"r":e=_("\r");break;case"t":e=_("	");break;case"v":e=_("\v");break}if(et(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:_("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:_(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:_(e)}}}characterClass(){const e=[];let n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){const r=this.classAtom();if(r.type,ks(r)&&this.isRangeDash()){this.consumeChar("-");const s=this.classAtom();if(s.type,ks(s)){if(s.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:s.value})}else Wn(r.value,e),e.push(_("-")),Wn(s.value,e)}else Wn(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:n,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:_("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const n=this.disjunction();this.consumeChar(")");const r={type:"Group",capturing:e,value:n};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(Yh.test(e)===!1)throw Error("Expecting a positive integer");for(;Yt.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Yt.test(e)===!1)throw Error("Expecting an integer");for(;Yt.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:_(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Yt.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let n="";for(let s=0;s<e;s++){const i=this.popChar();if(Vh.test(i)===!1)throw Error("Expecting a HexDecimal digits");n+=i}return{type:"Character",value:parseInt(n,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class jn{visitChildren(e){for(const n in e){const r=e[n];e.hasOwnProperty(n)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(s=>{this.visit(s)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let Xt={};const qh=new Xh;function qt(t){const e=t.toString();if(Xt.hasOwnProperty(e))return Xt[e];{const n=qh.pattern(e);return Xt[e]=n,n}}function Zh(){Xt={}}const bs="Complement Sets are not supported for first char optimization",Zt=`Unable to use "first char" lexer optimizations:
`;function Qh(t,e=!1){try{const n=qt(t);return zn(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===bs)e&&Ls(`${Zt}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";e&&(r=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Kn(`${Zt}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function zn(t,e,n){switch(t.type){case"Disjunction":for(let s=0;s<t.value.length;s++)zn(t.value[s],e,n);break;case"Alternative":const r=t.value;for(let s=0;s<r.length;s++){const i=r[s];switch(i.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const a=i;switch(a.type){case"Character":Qt(a.value,e,n);break;case"Set":if(a.complement===!0)throw Error(bs);S(a.value,c=>{if(typeof c=="number")Qt(c,e,n);else{const u=c;if(n===!0)for(let l=u.from;l<=u.to;l++)Qt(l,e,n);else{for(let l=u.from;l<=u.to&&l<Et;l++)Qt(l,e,n);if(u.to>=Et){const l=u.from>=Et?u.from:Et,h=u.to,f=ke(l),p=ke(h);for(let T=f;T<=p;T++)e[T]=T}}}});break;case"Group":zn(a.value,e,n);break;default:throw Error("Non Exhaustive Match")}const o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&Vn(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return F(e)}function Qt(t,e,n){const r=ke(t);e[r]=r,n===!0&&Jh(t,e)}function Jh(t,e){const n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){const s=ke(r.charCodeAt(0));e[s]=s}else{const s=n.toLowerCase();if(s!==n){const i=ke(s.charCodeAt(0));e[i]=i}}}function ws(t,e){return Ze(t.value,n=>{if(typeof n=="number")return K(e,n);{const r=n;return Ze(e,s=>r.from<=s&&s<=r.to)!==void 0}})}function Vn(t){const e=t.quantifier;return e&&e.atLeast===0?!0:t.value?N(t.value)?ce(t.value,Vn):Vn(t.value):!1}class ef extends jn{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){K(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?ws(e,this.targetCharCodes)===void 0&&(this.found=!0):ws(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Yn(t,e){if(e instanceof RegExp){const n=qt(e),r=new ef(t);return r.visit(n),r.found}else return Ze(e,n=>K(t,n.charCodeAt(0)))!==void 0}const He="PATTERN",pt="defaultMode",Jt="modes";let Us=typeof new RegExp("(?:)").sticky=="boolean";function tf(t,e){e=Bn(e,{useSticky:Us,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(E,d)=>d()});const n=e.tracer;n("initCharCodeToOptimizedIndexMap",()=>{Nf()});let r;n("Reject Lexer.NA",()=>{r=Ht(t,E=>E[He]===W.NA)});let s=!1,i;n("Transform Patterns",()=>{s=!1,i=A(r,E=>{const d=E[He];if(Ne(d)){const m=d.source;return m.length===1&&m!=="^"&&m!=="$"&&m!=="."&&!d.ignoreCase?m:m.length===2&&m[0]==="\\"&&!K(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],m[1])?m[1]:e.useSticky?Ds(d):Fs(d)}else{if(Se(d))return s=!0,{exec:d};if(typeof d=="object")return s=!0,d;if(typeof d=="string"){if(d.length===1)return d;{const m=d.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),L=new RegExp(m);return e.useSticky?Ds(L):Fs(L)}}else throw Error("non exhaustive match")}})});let a,o,c,u,l;n("misc mapping",()=>{a=A(r,E=>E.tokenTypeIdx),o=A(r,E=>{const d=E.GROUP;if(d!==W.SKIPPED){if(z(d))return d;if(Ce(d))return!1;throw Error("non exhaustive match")}}),c=A(r,E=>{const d=E.LONGER_ALT;if(d)return N(d)?A(d,L=>Os(r,L)):[Os(r,d)]}),u=A(r,E=>E.PUSH_MODE),l=A(r,E=>R(E,"POP_MODE"))});let h;n("Line Terminator Handling",()=>{const E=Bs(e.lineTerminatorCharacters);h=A(r,d=>!1),e.positionTracking!=="onlyOffset"&&(h=A(r,d=>R(d,"LINE_BREAKS")?!!d.LINE_BREAKS:Gs(d,E)===!1&&Yn(E,d.PATTERN)))});let f,p,T,I;n("Misc Mapping #2",()=>{f=A(r,$s),p=A(i,Sf),T=q(r,(E,d)=>{const m=d.GROUP;return z(m)&&m!==W.SKIPPED&&(E[m]=[]),E},{}),I=A(i,(E,d)=>({pattern:i[d],longerAlt:c[d],canLineTerminator:h[d],isCustom:f[d],short:p[d],group:o[d],push:u[d],pop:l[d],tokenTypeIdx:a[d],tokenType:r[d]}))});let O=!0,g=[];return e.safeMode||n("First Char Optimization",()=>{g=q(r,(E,d,m)=>{if(typeof d.PATTERN=="string"){const L=d.PATTERN.charCodeAt(0),de=ke(L);Xn(E,de,I[m])}else if(N(d.START_CHARS_HINT)){let L;S(d.START_CHARS_HINT,de=>{const be=typeof de=="string"?de.charCodeAt(0):de,je=ke(be);L!==je&&(L=je,Xn(E,je,I[m]))})}else if(Ne(d.PATTERN))if(d.PATTERN.unicode)O=!1,e.ensureOptimizations&&Kn(`${Zt}	Unable to analyze < ${d.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const L=Qh(d.PATTERN,e.ensureOptimizations);v(L)&&(O=!1),S(L,de=>{Xn(E,de,I[m])})}else e.ensureOptimizations&&Kn(`${Zt}	TokenType: <${d.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),O=!1;return E},[])}),{emptyGroups:T,patternIdxToConfig:I,charCodeToPatternIdxToConfig:g,hasCustom:s,canBeOptimized:O}}function nf(t,e){let n=[];const r=sf(t);n=n.concat(r.errors);const s=af(r.valid),i=s.valid;return n=n.concat(s.errors),n=n.concat(rf(i)),n=n.concat(pf(i)),n=n.concat(Ef(i,e)),n=n.concat(gf(i)),n}function rf(t){let e=[];const n=re(t,r=>Ne(r[He]));return e=e.concat(cf(n)),e=e.concat(hf(n)),e=e.concat(ff(n)),e=e.concat(df(n)),e=e.concat(uf(n)),e}function sf(t){const e=re(t,s=>!R(s,He)),n=A(e,s=>({message:"Token Type: ->"+s.name+"<- missing static 'PATTERN' property",type:k.MISSING_PATTERN,tokenTypes:[s]})),r=Bt(t,e);return{errors:n,valid:r}}function af(t){const e=re(t,s=>{const i=s[He];return!Ne(i)&&!Se(i)&&!R(i,"exec")&&!z(i)}),n=A(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:k.INVALID_PATTERN,tokenTypes:[s]})),r=Bt(t,e);return{errors:n,valid:r}}const of=/[^\\][$]/;function cf(t){class e extends jn{constructor(){super(...arguments),this.found=!1}visitEndAnchor(i){this.found=!0}}const n=re(t,s=>{const i=s.PATTERN;try{const a=qt(i),o=new e;return o.visit(a),o.found}catch{return of.test(i.source)}});return A(n,s=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+s.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:k.EOI_ANCHOR_FOUND,tokenTypes:[s]}))}function uf(t){const e=re(t,r=>r.PATTERN.test(""));return A(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:k.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}const lf=/[^\\[][\^]|^\^/;function hf(t){class e extends jn{constructor(){super(...arguments),this.found=!1}visitStartAnchor(i){this.found=!0}}const n=re(t,s=>{const i=s.PATTERN;try{const a=qt(i),o=new e;return o.visit(a),o.found}catch{return lf.test(i.source)}});return A(n,s=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+s.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:k.SOI_ANCHOR_FOUND,tokenTypes:[s]}))}function ff(t){const e=re(t,r=>{const s=r[He];return s instanceof RegExp&&(s.multiline||s.global)});return A(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:k.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function df(t){const e=[];let n=A(t,i=>q(t,(a,o)=>(i.PATTERN.source===o.PATTERN.source&&!K(e,o)&&o.PATTERN!==W.NA&&(e.push(o),a.push(o)),a),[]));n=lt(n);const r=re(n,i=>i.length>1);return A(r,i=>{const a=A(i,c=>c.name);return{message:`The same RegExp pattern ->${ue(i).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:k.DUPLICATE_PATTERNS_FOUND,tokenTypes:i}})}function pf(t){const e=re(t,r=>{if(!R(r,"GROUP"))return!1;const s=r.GROUP;return s!==W.SKIPPED&&s!==W.NA&&!z(s)});return A(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:k.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function Ef(t,e){const n=re(t,s=>s.PUSH_MODE!==void 0&&!K(e,s.PUSH_MODE));return A(n,s=>({message:`Token Type: ->${s.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${s.PUSH_MODE}<-which does not exist`,type:k.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[s]}))}function gf(t){const e=[],n=q(t,(r,s,i)=>{const a=s.PATTERN;return a===W.NA||(z(a)?r.push({str:a,idx:i,tokenType:s}):Ne(a)&&mf(a)&&r.push({str:a.source,idx:i,tokenType:s})),r},[]);return S(t,(r,s)=>{S(n,({str:i,idx:a,tokenType:o})=>{if(s<a&&Tf(i,r.PATTERN)){const c=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${r.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:k.UNREACHABLE_PATTERN,tokenTypes:[r,o]})}})}),e}function Tf(t,e){if(Ne(e)){const n=e.exec(t);return n!==null&&n.index===0}else{if(Se(e))return e(t,0,[],{});if(R(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function mf(t){return Ze([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>t.source.indexOf(n)!==-1)===void 0}function Fs(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function Ds(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function Af(t,e,n){const r=[];return R(t,pt)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+pt+`> property in its definition
`,type:k.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),R(t,Jt)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Jt+`> property in its definition
`,type:k.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),R(t,Jt)&&R(t,pt)&&!R(t.modes,t.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${pt}: <${t.defaultMode}>which does not exist
`,type:k.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),R(t,Jt)&&S(t.modes,(s,i)=>{S(s,(a,o)=>{if(Ce(a))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${i}> at index: <${o}>
`,type:k.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(R(a,"LONGER_ALT")){const c=N(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];S(c,u=>{!Ce(u)&&!K(s,u)&&r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${u.name}> on token <${a.name}> outside of mode <${i}>
`,type:k.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),r}function Rf(t,e,n){const r=[];let s=!1;const i=lt(oe(F(t.modes))),a=Ht(i,c=>c[He]===W.NA),o=Bs(n);return e&&S(a,c=>{const u=Gs(c,o);if(u!==!1){const h={message:Of(c,u),type:u.issue,tokenType:c};r.push(h)}else R(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(s=!0):Yn(o,c.PATTERN)&&(s=!0)}),e&&!s&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:k.NO_LINE_BREAKS_FLAGS}),r}function If(t){const e={},n=te(t);return S(n,r=>{const s=t[r];if(N(s))e[r]=[];else throw Error("non exhaustive match")}),e}function $s(t){const e=t.PATTERN;if(Ne(e))return!1;if(Se(e))return!0;if(R(e,"exec"))return!0;if(z(e))return!1;throw Error("non exhaustive match")}function Sf(t){return z(t)&&t.length===1?t.charCodeAt(0):!1}const _f={test:function(t){const e=t.length;for(let n=this.lastIndex;n<e;n++){const r=t.charCodeAt(n);if(r===10)return this.lastIndex=n+1,!0;if(r===13)return t.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function Gs(t,e){if(R(t,"LINE_BREAKS"))return!1;if(Ne(t.PATTERN)){try{Yn(e,t.PATTERN)}catch(n){return{issue:k.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(z(t.PATTERN))return!1;if($s(t))return{issue:k.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function Of(t,e){if(e.issue===k.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===k.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Bs(t){return A(t,n=>z(n)?n.charCodeAt(0):n)}function Xn(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}const Et=256;let en=[];function ke(t){return t<Et?t:en[t]}function Nf(){if(v(en)){en=new Array(65536);for(let t=0;t<65536;t++)en[t]=t>255?255+~~(t/255):t}}function gt(t,e){const n=t.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}function tn(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}let Hs=1;const Ks={};function Tt(t){const e=Cf(t);Lf(e),vf(e),yf(e),S(e,n=>{n.isParent=n.categoryMatches.length>0})}function Cf(t){let e=G(t),n=t,r=!0;for(;r;){n=lt(oe(A(n,i=>i.CATEGORIES)));const s=Bt(n,e);e=e.concat(s),v(s)?r=!1:n=s}return e}function Lf(t){S(t,e=>{js(e)||(Ks[Hs]=e,e.tokenTypeIdx=Hs++),zs(e)&&!N(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),zs(e)||(e.CATEGORIES=[]),Pf(e)||(e.categoryMatches=[]),Mf(e)||(e.categoryMatchesMap={})})}function yf(t){S(t,e=>{e.categoryMatches=[],S(e.categoryMatchesMap,(n,r)=>{e.categoryMatches.push(Ks[r].tokenTypeIdx)})})}function vf(t){S(t,e=>{Ws([],e)})}function Ws(t,e){S(t,n=>{e.categoryMatchesMap[n.tokenTypeIdx]=!0}),S(e.CATEGORIES,n=>{const r=t.concat(e);K(r,n)||Ws(r,n)})}function js(t){return R(t,"tokenTypeIdx")}function zs(t){return R(t,"CATEGORIES")}function Pf(t){return R(t,"categoryMatches")}function Mf(t){return R(t,"categoryMatchesMap")}function kf(t){return R(t,"tokenTypeIdx")}const xf={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,n,r,s){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`}};var k;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(k||(k={}));const mt={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:xf,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(mt);class W{constructor(e,n=mt){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(s,i)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${s}>`);const{time:o,value:c}=ys(i),u=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u(`${a}<-- <${s}> time: ${o}ms`),this.traceInitIndent--,c}else return i()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=X({},mt,n);const r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let s,i=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===mt.lineTerminatorsPattern)this.config.lineTerminatorsPattern=_f;else if(this.config.lineTerminatorCharacters===mt.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),N(e)?s={modes:{defaultMode:G(e)},defaultMode:pt}:(i=!1,s=G(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Af(s,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Rf(s,this.trackStartLines,this.config.lineTerminatorCharacters))})),s.modes=s.modes?s.modes:{},S(s.modes,(o,c)=>{s.modes[c]=Ht(o,u=>Ce(u))});const a=te(s.modes);if(S(s.modes,(o,c)=>{this.TRACE_INIT(`Mode: <${c}> processing`,()=>{if(this.modes.push(c),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(nf(o,a))}),v(this.lexerDefinitionErrors)){Tt(o);let u;this.TRACE_INIT("analyzeTokenTypes",()=>{u=tf(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[c]=u.patternIdxToConfig,this.charCodeToPatternIdxToConfig[c]=u.charCodeToPatternIdxToConfig,this.emptyGroups=X({},this.emptyGroups,u.emptyGroups),this.hasCustom=u.hasCustom||this.hasCustom,this.canModeBeOptimized[c]=u.canBeOptimized}})}),this.defaultMode=s.defaultMode,!v(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const c=A(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+c)}S(this.lexerDefinitionWarning,o=>{Ls(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Us?(this.chopInput=Ve,this.match=this.matchWithTest):(this.updateLastIndex=U,this.match=this.matchWithExec),i&&(this.handleModes=U),this.trackStartLines===!1&&(this.computeNewColumn=Ve),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=U),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=q(this.canModeBeOptimized,(c,u,l)=>(u===!1&&c.push(l),c),[]);if(n.ensureOptimizations&&!v(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{Zh()}),this.TRACE_INIT("toFastProperties",()=>{vs(this)})})}tokenize(e,n=this.defaultMode){if(!v(this.lexerDefinitionErrors)){const s=A(this.lexerDefinitionErrors,i=>i.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+s)}return this.tokenizeInternal(e,n)}tokenizeInternal(e,n){let r,s,i,a,o,c,u,l,h,f,p,T,I,O,g;const E=e,d=E.length;let m=0,L=0;const de=this.hasCustom?0:Math.floor(e.length/10),be=new Array(de),je=[];let _t=this.trackStartLines?1:void 0,we=this.trackStartLines?1:void 0;const Ot=If(this.emptyGroups),tp=this.trackStartLines,Er=this.config.lineTerminatorsPattern;let gn=0,Ue=[],Nt=[];const Tn=[],Xi=[];Object.freeze(Xi);let Ct;function qi(){return Ue}function Zi(H){const ie=ke(H),tt=Nt[ie];return tt===void 0?Xi:tt}const np=H=>{if(Tn.length===1&&H.tokenType.PUSH_MODE===void 0){const ie=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(H);je.push({offset:H.startOffset,line:H.startLine,column:H.startColumn,length:H.image.length,message:ie})}else{Tn.pop();const ie=qe(Tn);Ue=this.patternIdxToConfig[ie],Nt=this.charCodeToPatternIdxToConfig[ie],gn=Ue.length;const tt=this.canModeBeOptimized[ie]&&this.config.safeMode===!1;Nt&&tt?Ct=Zi:Ct=qi}};function Qi(H){Tn.push(H),Nt=this.charCodeToPatternIdxToConfig[H],Ue=this.patternIdxToConfig[H],gn=Ue.length,gn=Ue.length;const ie=this.canModeBeOptimized[H]&&this.config.safeMode===!1;Nt&&ie?Ct=Zi:Ct=qi}Qi.call(this,n);let pe;const Ji=this.config.recoveryEnabled;for(;m<d;){c=null;const H=E.charCodeAt(m),ie=Ct(H),tt=ie.length;for(r=0;r<tt;r++){pe=ie[r];const Q=pe.pattern;u=null;const ye=pe.short;if(ye!==!1?H===ye&&(c=Q):pe.isCustom===!0?(g=Q.exec(E,m,be,Ot),g!==null?(c=g[0],g.payload!==void 0&&(u=g.payload)):c=null):(this.updateLastIndex(Q,m),c=this.match(Q,e,m)),c!==null){if(o=pe.longerAlt,o!==void 0){const Fe=o.length;for(i=0;i<Fe;i++){const ve=Ue[o[i]],ze=ve.pattern;if(l=null,ve.isCustom===!0?(g=ze.exec(E,m,be,Ot),g!==null?(a=g[0],g.payload!==void 0&&(l=g.payload)):a=null):(this.updateLastIndex(ze,m),a=this.match(ze,e,m)),a&&a.length>c.length){c=a,u=l,pe=ve;break}}}break}}if(c!==null){if(h=c.length,f=pe.group,f!==void 0&&(p=pe.tokenTypeIdx,T=this.createTokenInstance(c,m,p,pe.tokenType,_t,we,h),this.handlePayload(T,u),f===!1?L=this.addToken(be,L,T):Ot[f].push(T)),e=this.chopInput(e,h),m=m+h,we=this.computeNewColumn(we,h),tp===!0&&pe.canLineTerminator===!0){let Q=0,ye,Fe;Er.lastIndex=0;do ye=Er.test(c),ye===!0&&(Fe=Er.lastIndex-1,Q++);while(ye===!0);Q!==0&&(_t=_t+Q,we=h-Fe,this.updateTokenEndLineColumnLocation(T,f,Fe,Q,_t,we,h))}this.handleModes(pe,np,Qi,T)}else{const Q=m,ye=_t,Fe=we;let ve=Ji===!1;for(;ve===!1&&m<d;)for(e=this.chopInput(e,1),m++,s=0;s<gn;s++){const ze=Ue[s],gr=ze.pattern,ea=ze.short;if(ea!==!1?E.charCodeAt(m)===ea&&(ve=!0):ze.isCustom===!0?ve=gr.exec(E,m,be,Ot)!==null:(this.updateLastIndex(gr,m),ve=gr.exec(e)!==null),ve===!0)break}if(I=m-Q,we=this.computeNewColumn(we,I),O=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(E,Q,I,ye,Fe),je.push({offset:Q,line:ye,column:Fe,length:I,message:O}),Ji===!1)break}}return this.hasCustom||(be.length=L),{tokens:be,groups:Ot,errors:je}}handleModes(e,n,r,s){if(e.pop===!0){const i=e.push;n(s),i!==void 0&&r.call(this,i)}else e.push!==void 0&&r.call(this,e.push)}chopInput(e,n){return e.substring(n)}updateLastIndex(e,n){e.lastIndex=n}updateTokenEndLineColumnLocation(e,n,r,s,i,a,o){let c,u;n!==void 0&&(c=r===o-1,u=c?-1:0,s===1&&c===!0||(e.endLine=i+u,e.endColumn=a-1+-u))}computeNewColumn(e,n){return e+n}createOffsetOnlyToken(e,n,r,s){return{image:e,startOffset:n,tokenTypeIdx:r,tokenType:s}}createStartOnlyToken(e,n,r,s,i,a){return{image:e,startOffset:n,startLine:i,startColumn:a,tokenTypeIdx:r,tokenType:s}}createFullToken(e,n,r,s,i,a,o){return{image:e,startOffset:n,endOffset:n+o-1,startLine:i,endLine:i,startColumn:a,endColumn:a+o-1,tokenTypeIdx:r,tokenType:s}}addTokenUsingPush(e,n,r){return e.push(r),n}addTokenUsingMemberAccess(e,n,r){return e[n]=r,n++,n}handlePayloadNoCustom(e,n){}handlePayloadWithCustom(e,n){n!==null&&(e.payload=n)}matchWithTest(e,n,r){return e.test(n)===!0?n.substring(r,e.lastIndex):null}matchWithExec(e,n){const r=e.exec(n);return r!==null?r[0]:null}}W.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",W.NA=/NOT_APPLICABLE/;function At(t){return Vs(t)?t.LABEL:t.name}function Vs(t){return z(t.LABEL)&&t.LABEL!==""}const bf="parent",Ys="categories",Xs="label",qs="group",Zs="push_mode",Qs="pop_mode",Js="longer_alt",ei="line_breaks",ti="start_chars_hint";function C(t){return wf(t)}function wf(t){const e=t.pattern,n={};if(n.name=t.name,Ce(e)||(n.PATTERN=e),R(t,bf))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return R(t,Ys)&&(n.CATEGORIES=t[Ys]),Tt([n]),R(t,Xs)&&(n.LABEL=t[Xs]),R(t,qs)&&(n.GROUP=t[qs]),R(t,Qs)&&(n.POP_MODE=t[Qs]),R(t,Zs)&&(n.PUSH_MODE=t[Zs]),R(t,Js)&&(n.LONGER_ALT=t[Js]),R(t,ei)&&(n.LINE_BREAKS=t[ei]),R(t,ti)&&(n.START_CHARS_HINT=t[ti]),n}const Ke=C({name:"EOF",pattern:W.NA});Tt([Ke]);function qn(t,e,n,r,s,i,a,o){return{image:e,startOffset:n,endOffset:r,startLine:s,endLine:i,startColumn:a,endColumn:o,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function Uf(t,e){return gt(t,e)}const ni={buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:r}){return`Expecting ${Vs(t)?`--> ${At(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:r,ruleName:s}){const i="Expecting: ",o=`
but found: '`+ue(e).image+"'";if(r)return i+r+o;{const c=q(t,(f,p)=>f.concat(p),[]),u=A(c,f=>`[${A(f,p=>At(p)).join(", ")}]`),h=`one of these possible Token sequences:
${A(u,(f,p)=>`  ${p+1}. ${f}`).join(`
`)}`;return i+h+o}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:r}){const s="Expecting: ",a=`
but found: '`+ue(e).image+"'";if(n)return s+n+a;{const c=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${A(t,u=>`[${A(u,l=>At(l)).join(",")}]`).join(" ,")}>`;return s+c+a}}};Object.freeze(ni);const Ff={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},We={buildDuplicateFoundError(t,e){function n(l){return l instanceof M?l.terminalType.name:l instanceof Z?l.nonTerminalName:""}const r=t.name,s=ue(e),i=s.idx,a=Ie(s),o=n(s),c=i>0;let u=`->${a}${c?i:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${r}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,`
`),u},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){const e=A(t.prefixPath,s=>At(s)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){const e=A(t.prefixPath,s=>At(s)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;let r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError(t){let e=Ie(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){const e=t.topLevelRule.name,n=A(t.leftRecursionPath,i=>i.name),r=`${e} --> ${n.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${r}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof Qe?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function Df(t,e){const n=new $f(t,e);return n.resolveRefs(),n.errors}class $f extends Je{constructor(e,n){super(),this.nameToTopRule=e,this.errMsgProvider=n,this.errors=[]}resolveRefs(){S(F(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const n=this.nameToTopRule[e.nonTerminalName];if(n)e.referencedRule=n;else{const r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:j.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class Gf extends jt{constructor(e,n){super(),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=G(this.path.ruleStack).reverse(),this.occurrenceStack=G(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,n=[]){this.found||super.walk(e,n)}walkProdRef(e,n,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const s=n.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,s)}}updateExpectedNext(){v(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class Bf extends Gf{constructor(e,n){super(e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,n,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const s=n.concat(r),i=new V({definition:s});this.possibleTokTypes=ft(i),this.found=!0}}}class nn extends jt{constructor(e,n){super(),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class Hf extends nn{walkMany(e,n,r){if(e.idx===this.occurrence){const s=ue(n.concat(r));this.result.isEndOfRule=s===void 0,s instanceof M&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else super.walkMany(e,n,r)}}class ri extends nn{walkManySep(e,n,r){if(e.idx===this.occurrence){const s=ue(n.concat(r));this.result.isEndOfRule=s===void 0,s instanceof M&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else super.walkManySep(e,n,r)}}class Kf extends nn{walkAtLeastOne(e,n,r){if(e.idx===this.occurrence){const s=ue(n.concat(r));this.result.isEndOfRule=s===void 0,s instanceof M&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else super.walkAtLeastOne(e,n,r)}}class si extends nn{walkAtLeastOneSep(e,n,r){if(e.idx===this.occurrence){const s=ue(n.concat(r));this.result.isEndOfRule=s===void 0,s instanceof M&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else super.walkAtLeastOneSep(e,n,r)}}function Zn(t,e,n=[]){n=G(n);let r=[],s=0;function i(o){return o.concat(B(t,s+1))}function a(o){const c=Zn(i(o),e,n);return r.concat(c)}for(;n.length<e&&s<t.length;){const o=t[s];if(o instanceof V)return a(o.definition);if(o instanceof Z)return a(o.definition);if(o instanceof Y)r=a(o.definition);else if(o instanceof Ae){const c=o.definition.concat([new D({definition:o.definition})]);return a(c)}else if(o instanceof Re){const c=[new V({definition:o.definition}),new D({definition:[new M({terminalType:o.separator})].concat(o.definition)})];return a(c)}else if(o instanceof he){const c=o.definition.concat([new D({definition:[new M({terminalType:o.separator})].concat(o.definition)})]);r=a(c)}else if(o instanceof D){const c=o.definition.concat([new D({definition:o.definition})]);r=a(c)}else{if(o instanceof fe)return S(o.definition,c=>{v(c.definition)===!1&&(r=a(c.definition))}),r;if(o instanceof M)n.push(o.terminalType);else throw Error("non exhaustive match")}s++}return r.push({partialPath:n,suffixDef:B(t,s)}),r}function ii(t,e,n,r){const s="EXIT_NONE_TERMINAL",i=[s],a="EXIT_ALTERNATIVE";let o=!1;const c=e.length,u=c-r-1,l=[],h=[];for(h.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!v(h);){const f=h.pop();if(f===a){o&&qe(h).idx<=u&&h.pop();continue}const p=f.def,T=f.idx,I=f.ruleStack,O=f.occurrenceStack;if(v(p))continue;const g=p[0];if(g===s){const E={idx:T,def:B(p),ruleStack:ht(I),occurrenceStack:ht(O)};h.push(E)}else if(g instanceof M)if(T<c-1){const E=T+1,d=e[E];if(n(d,g.terminalType)){const m={idx:E,def:B(p),ruleStack:I,occurrenceStack:O};h.push(m)}}else if(T===c-1)l.push({nextTokenType:g.terminalType,nextTokenOccurrence:g.idx,ruleStack:I,occurrenceStack:O}),o=!0;else throw Error("non exhaustive match");else if(g instanceof Z){const E=G(I);E.push(g.nonTerminalName);const d=G(O);d.push(g.idx);const m={idx:T,def:g.definition.concat(i,B(p)),ruleStack:E,occurrenceStack:d};h.push(m)}else if(g instanceof Y){const E={idx:T,def:B(p),ruleStack:I,occurrenceStack:O};h.push(E),h.push(a);const d={idx:T,def:g.definition.concat(B(p)),ruleStack:I,occurrenceStack:O};h.push(d)}else if(g instanceof Ae){const E=new D({definition:g.definition,idx:g.idx}),d=g.definition.concat([E],B(p)),m={idx:T,def:d,ruleStack:I,occurrenceStack:O};h.push(m)}else if(g instanceof Re){const E=new M({terminalType:g.separator}),d=new D({definition:[E].concat(g.definition),idx:g.idx}),m=g.definition.concat([d],B(p)),L={idx:T,def:m,ruleStack:I,occurrenceStack:O};h.push(L)}else if(g instanceof he){const E={idx:T,def:B(p),ruleStack:I,occurrenceStack:O};h.push(E),h.push(a);const d=new M({terminalType:g.separator}),m=new D({definition:[d].concat(g.definition),idx:g.idx}),L=g.definition.concat([m],B(p)),de={idx:T,def:L,ruleStack:I,occurrenceStack:O};h.push(de)}else if(g instanceof D){const E={idx:T,def:B(p),ruleStack:I,occurrenceStack:O};h.push(E),h.push(a);const d=new D({definition:g.definition,idx:g.idx}),m=g.definition.concat([d],B(p)),L={idx:T,def:m,ruleStack:I,occurrenceStack:O};h.push(L)}else if(g instanceof fe)for(let E=g.definition.length-1;E>=0;E--){const d=g.definition[E],m={idx:T,def:d.definition.concat(B(p)),ruleStack:I,occurrenceStack:O};h.push(m),h.push(a)}else if(g instanceof V)h.push({idx:T,def:g.definition.concat(B(p)),ruleStack:I,occurrenceStack:O});else if(g instanceof Qe)h.push(Wf(g,T,I,O));else throw Error("non exhaustive match")}return l}function Wf(t,e,n,r){const s=G(n);s.push(t.name);const i=G(r);return i.push(1),{idx:e,def:t.definition,ruleStack:s,occurrenceStack:i}}var x;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(x||(x={}));function ai(t){if(t instanceof Y||t==="Option")return x.OPTION;if(t instanceof D||t==="Repetition")return x.REPETITION;if(t instanceof Ae||t==="RepetitionMandatory")return x.REPETITION_MANDATORY;if(t instanceof Re||t==="RepetitionMandatoryWithSeparator")return x.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof he||t==="RepetitionWithSeparator")return x.REPETITION_WITH_SEPARATOR;if(t instanceof fe||t==="Alternation")return x.ALTERNATION;throw Error("non exhaustive match")}function jf(t,e,n,r,s,i){const a=Jn(t,e,n),o=li(a)?tn:gt;return i(a,r,o,s)}function zf(t,e,n,r,s,i){const a=er(t,e,s,n),o=li(a)?tn:gt;return i(a[0],o,r)}function Vf(t,e,n,r){const s=t.length,i=ce(t,a=>ce(a,o=>o.length===1));if(e)return function(a){const o=A(a,c=>c.GATE);for(let c=0;c<s;c++){const u=t[c],l=u.length,h=o[c];if(!(h!==void 0&&h.call(this)===!1))e:for(let f=0;f<l;f++){const p=u[f],T=p.length;for(let I=0;I<T;I++){const O=this.LA(I+1);if(n(O,p[I])===!1)continue e}return c}}};if(i&&!r){const a=A(t,c=>oe(c)),o=q(a,(c,u,l)=>(S(u,h=>{R(c,h.tokenTypeIdx)||(c[h.tokenTypeIdx]=l),S(h.categoryMatches,f=>{R(c,f)||(c[f]=l)})}),c),{});return function(){const c=this.LA(1);return o[c.tokenTypeIdx]}}else return function(){for(let a=0;a<s;a++){const o=t[a],c=o.length;e:for(let u=0;u<c;u++){const l=o[u],h=l.length;for(let f=0;f<h;f++){const p=this.LA(f+1);if(n(p,l[f])===!1)continue e}return a}}}}function Yf(t,e,n){const r=ce(t,i=>i.length===1),s=t.length;if(r&&!n){const i=oe(t);if(i.length===1&&v(i[0].categoryMatches)){const o=i[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const a=q(i,(o,c,u)=>(o[c.tokenTypeIdx]=!0,S(c.categoryMatches,l=>{o[l]=!0}),o),[]);return function(){const o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){e:for(let i=0;i<s;i++){const a=t[i],o=a.length;for(let c=0;c<o;c++){const u=this.LA(c+1);if(e(u,a[c])===!1)continue e}return!0}return!1}}class Xf extends jt{constructor(e,n,r){super(),this.topProd=e,this.targetOccurrence=n,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,n,r,s){return e.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=r.concat(s),!0):!1}walkOption(e,n,r){this.checkIsTarget(e,x.OPTION,n,r)||super.walkOption(e,n,r)}walkAtLeastOne(e,n,r){this.checkIsTarget(e,x.REPETITION_MANDATORY,n,r)||super.walkOption(e,n,r)}walkAtLeastOneSep(e,n,r){this.checkIsTarget(e,x.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}walkMany(e,n,r){this.checkIsTarget(e,x.REPETITION,n,r)||super.walkOption(e,n,r)}walkManySep(e,n,r){this.checkIsTarget(e,x.REPETITION_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}}class oi extends Je{constructor(e,n,r){super(),this.targetOccurrence=e,this.targetProdType=n,this.targetRef=r,this.result=[]}checkIsTarget(e,n){e.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,x.OPTION)}visitRepetition(e){this.checkIsTarget(e,x.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,x.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,x.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,x.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,x.ALTERNATION)}}function ci(t){const e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}function Qn(t){let e=[""];for(let n=0;n<t.length;n++){const r=t[n],s=[];for(let i=0;i<e.length;i++){const a=e[i];s.push(a+"_"+r.tokenTypeIdx);for(let o=0;o<r.categoryMatches.length;o++){const c="_"+r.categoryMatches[o];s.push(a+c)}}e=s}return e}function qf(t,e,n){for(let r=0;r<t.length;r++){if(r===n)continue;const s=t[r];for(let i=0;i<e.length;i++){const a=e[i];if(s[a]===!0)return!1}}return!0}function ui(t,e){const n=A(t,a=>Zn([a],1)),r=ci(n.length),s=A(n,a=>{const o={};return S(a,c=>{const u=Qn(c.partialPath);S(u,l=>{o[l]=!0})}),o});let i=n;for(let a=1;a<=e;a++){const o=i;i=ci(o.length);for(let c=0;c<o.length;c++){const u=o[c];for(let l=0;l<u.length;l++){const h=u[l].partialPath,f=u[l].suffixDef,p=Qn(h);if(qf(s,p,c)||v(f)||h.length===e){const I=r[c];if(tr(I,h)===!1){I.push(h);for(let O=0;O<p.length;O++){const g=p[O];s[c][g]=!0}}}else{const I=Zn(f,a+1,h);i[c]=i[c].concat(I),S(I,O=>{const g=Qn(O.partialPath);S(g,E=>{s[c][E]=!0})})}}}}return r}function Jn(t,e,n,r){const s=new oi(t,x.ALTERNATION,r);return e.accept(s),ui(s.result,n)}function er(t,e,n,r){const s=new oi(t,n);e.accept(s);const i=s.result,o=new Xf(e,t,n).startWalking(),c=new V({definition:i}),u=new V({definition:o});return ui([c,u],r)}function tr(t,e){e:for(let n=0;n<t.length;n++){const r=t[n];if(r.length===e.length){for(let s=0;s<r.length;s++){const i=e[s],a=r[s];if((i===a||a.categoryMatchesMap[i.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function Zf(t,e){return t.length<e.length&&ce(t,(n,r)=>{const s=e[r];return n===s||s.categoryMatchesMap[n.tokenTypeIdx]})}function li(t){return ce(t,e=>ce(e,n=>ce(n,r=>v(r.categoryMatches))))}function Qf(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return A(e,n=>Object.assign({type:j.CUSTOM_LOOKAHEAD_VALIDATION},n))}function Jf(t,e,n,r){const s=se(t,c=>ed(c,n)),i=fd(t,e,n),a=se(t,c=>cd(c,n)),o=se(t,c=>rd(c,t,r,n));return s.concat(i,a,o)}function ed(t,e){const n=new nd;t.accept(n);const r=n.allProductions,s=fh(r,td),i=le(s,o=>o.length>1);return A(F(i),o=>{const c=ue(o),u=e.buildDuplicateFoundError(t,o),l=Ie(c),h={message:u,type:j.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:l,occurrence:c.idx},f=hi(c);return f&&(h.parameter=f),h})}function td(t){return`${Ie(t)}_#_${t.idx}_#_${hi(t)}`}function hi(t){return t instanceof M?t.terminalType.name:t instanceof Z?t.nonTerminalName:""}class nd extends Je{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function rd(t,e,n,r){const s=[];if(q(e,(a,o)=>o.name===t.name?a+1:a,0)>1){const a=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});s.push({message:a,type:j.DUPLICATE_RULE_NAME,ruleName:t.name})}return s}function sd(t,e,n){const r=[];let s;return K(e,t)||(s=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:s,type:j.INVALID_RULE_OVERRIDE,ruleName:t})),r}function fi(t,e,n,r=[]){const s=[],i=rn(e.definition);if(v(i))return[];{const a=t.name;K(i,t)&&s.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:j.LEFT_RECURSION,ruleName:a});const c=Bt(i,r.concat([t])),u=se(c,l=>{const h=G(r);return h.push(l),fi(t,l,n,h)});return s.concat(u)}}function rn(t){let e=[];if(v(t))return e;const n=ue(t);if(n instanceof Z)e.push(n.referencedRule);else if(n instanceof V||n instanceof Y||n instanceof Ae||n instanceof Re||n instanceof he||n instanceof D)e=e.concat(rn(n.definition));else if(n instanceof fe)e=oe(A(n.definition,i=>rn(i.definition)));else if(!(n instanceof M))throw Error("non exhaustive match");const r=Wt(n),s=t.length>1;if(r&&s){const i=B(t);return e.concat(rn(i))}else return e}class nr extends Je{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function id(t,e){const n=new nr;t.accept(n);const r=n.alternations;return se(r,i=>{const a=ht(i.definition);return se(a,(o,c)=>{const u=ii([o],[],gt,1);return v(u)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:i,emptyChoiceIdx:c}),type:j.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:i.idx,alternative:c+1}]:[]})})}function ad(t,e,n){const r=new nr;t.accept(r);let s=r.alternations;return s=Ht(s,a=>a.ignoreAmbiguities===!0),se(s,a=>{const o=a.idx,c=a.maxLookahead||e,u=Jn(o,t,c,a),l=ld(u,a,t,n),h=hd(u,a,t,n);return l.concat(h)})}class od extends Je{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function cd(t,e){const n=new nr;t.accept(n);const r=n.alternations;return se(r,i=>i.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:i}),type:j.TOO_MANY_ALTS,ruleName:t.name,occurrence:i.idx}]:[])}function ud(t,e,n){const r=[];return S(t,s=>{const i=new od;s.accept(i);const a=i.allProductions;S(a,o=>{const c=ai(o),u=o.maxLookahead||e,l=o.idx,f=er(l,s,c,u)[0];if(v(oe(f))){const p=n.buildEmptyRepetitionError({topLevelRule:s,repetition:o});r.push({message:p,type:j.NO_NON_EMPTY_LOOKAHEAD,ruleName:s.name})}})}),r}function ld(t,e,n,r){const s=[],i=q(t,(o,c,u)=>(e.definition[u].ignoreAmbiguities===!0||S(c,l=>{const h=[u];S(t,(f,p)=>{u!==p&&tr(f,l)&&e.definition[p].ignoreAmbiguities!==!0&&h.push(p)}),h.length>1&&!tr(s,l)&&(s.push(l),o.push({alts:h,path:l}))}),o),[]);return A(i,o=>{const c=A(o.alts,l=>l+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:c,prefixPath:o.path}),type:j.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:o.alts}})}function hd(t,e,n,r){const s=q(t,(a,o,c)=>{const u=A(o,l=>({idx:c,path:l}));return a.concat(u)},[]);return lt(se(s,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];const c=a.idx,u=a.path,l=re(s,f=>e.definition[f.idx].ignoreAmbiguities!==!0&&f.idx<c&&Zf(f.path,u));return A(l,f=>{const p=[f.idx+1,c+1],T=e.idx===0?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:p,prefixPath:f.path}),type:j.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:T,alternatives:p}})}))}function fd(t,e,n){const r=[],s=A(e,i=>i.name);return S(t,i=>{const a=i.name;if(K(s,a)){const o=n.buildNamespaceConflictError(i);r.push({message:o,type:j.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),r}function dd(t){const e=Bn(t,{errMsgProvider:Ff}),n={};return S(t.rules,r=>{n[r.name]=r}),Df(n,e.errMsgProvider)}function pd(t){return t=Bn(t,{errMsgProvider:We}),Jf(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}const di="MismatchedTokenException",pi="NoViableAltException",Ei="EarlyExitException",gi="NotAllInputParsedException",Ti=[di,pi,Ei,gi];Object.freeze(Ti);function sn(t){return K(Ti,t.name)}class an extends Error{constructor(e,n){super(e),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class mi extends an{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=di}}class Ed extends an{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=pi}}class gd extends an{constructor(e,n){super(e,n),this.name=gi}}class Td extends an{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=Ei}}const rr={},Ai="InRuleRecoveryException";class md extends Error{constructor(e){super(e),this.name=Ai}}class Ad{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=R(e,"recoveryEnabled")?e.recoveryEnabled:Le.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Rd)}getTokenToInsert(e){const n=qn(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,n,r,s){const i=this.findReSyncTokenType(),a=this.exportLexerState(),o=[];let c=!1;const u=this.LA(1);let l=this.LA(1);const h=()=>{const f=this.LA(0),p=this.errorMessageProvider.buildMismatchTokenMessage({expected:s,actual:u,previous:f,ruleName:this.getCurrRuleFullName()}),T=new mi(p,u,this.LA(0));T.resyncedTokens=ht(o),this.SAVE_ERROR(T)};for(;!c;)if(this.tokenMatcher(l,s)){h();return}else if(r.call(this)){h(),e.apply(this,n);return}else this.tokenMatcher(l,i)?c=!0:(l=this.SKIP_TOKEN(),this.addToResyncTokens(l,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,n,r){return!(r===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))}getFollowsForInRuleRecovery(e,n){const r=this.getCurrentGrammarPath(e,n);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new md("sad sad panda")}canPerformInRuleRecovery(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,n){if(!this.canTokenTypeBeInsertedInRecovery(e)||v(n))return!1;const r=this.LA(1);return Ze(n,i=>this.tokenMatcher(r,i))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const n=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(n);return K(r,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let n=this.LA(1),r=2;for(;;){const s=Ze(e,i=>Uf(n,i));if(s!==void 0)return s;n=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return rr;const e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return A(e,(r,s)=>s===0?rr:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:n[s],inRule:this.shortRuleNameToFullName(e[s-1])})}flattenFollowSet(){const e=A(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return oe(e)}getFollowSetFromFollowKey(e){if(e===rr)return[Ke];const n=e.ruleName+e.idxInCallingRule+Ms+e.inRule;return this.resyncFollows[n]}addToResyncTokens(e,n){return this.tokenMatcher(e,Ke)||n.push(e),n}reSyncTo(e){const n=[];let r=this.LA(1);for(;this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,n);return ht(n)}attemptInRepetitionRecovery(e,n,r,s,i,a,o){}getCurrentGrammarPath(e,n){const r=this.getHumanReadableRuleStack(),s=G(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:s,lastTok:e,lastTokOccurrence:n}}getHumanReadableRuleStack(){return A(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function Rd(t,e,n,r,s,i,a){const o=this.getKeyForAutomaticLookahead(r,s);let c=this.firstAfterRepMap[o];if(c===void 0){const f=this.getCurrRuleFullName(),p=this.getGAstProductions()[f];c=new i(p,s).startWalking(),this.firstAfterRepMap[o]=c}let u=c.token,l=c.occurrence;const h=c.isEndOfRule;this.RULE_STACK.length===1&&h&&u===void 0&&(u=Ke,l=1),!(u===void 0||l===void 0)&&this.shouldInRepetitionRecoveryBeTried(u,l,a)&&this.tryInRepetitionRecovery(t,e,n,u)}const Id=4,xe=8,Ri=1<<xe,Ii=2<<xe,sr=3<<xe,ir=4<<xe,ar=5<<xe,on=6<<xe;function or(t,e,n){return n|e|t}class Sd{constructor(e){var n;this.maxLookahead=(n=e==null?void 0:e.maxLookahead)!==null&&n!==void 0?n:Le.maxLookahead}validate(e){const n=this.validateNoLeftRecursion(e.rules);if(v(n)){const r=this.validateEmptyOrAlternatives(e.rules),s=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),i=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...n,...r,...s,...i]}return n}validateNoLeftRecursion(e){return se(e,n=>fi(n,n,We))}validateEmptyOrAlternatives(e){return se(e,n=>id(n,We))}validateAmbiguousAlternationAlternatives(e,n){return se(e,r=>ad(r,n,We))}validateSomeNonEmptyLookaheadPath(e,n){return ud(e,n,We)}buildLookaheadForAlternation(e){return jf(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,Vf)}buildLookaheadForOptional(e){return zf(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,ai(e.prodType),Yf)}}class _d{initLooksAhead(e){this.dynamicTokensEnabled=R(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Le.dynamicTokensEnabled,this.maxLookahead=R(e,"maxLookahead")?e.maxLookahead:Le.maxLookahead,this.lookaheadStrategy=R(e,"lookaheadStrategy")?e.lookaheadStrategy:new Sd({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){S(e,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{const{alternation:r,repetition:s,option:i,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:c}=Nd(n);S(r,u=>{const l=u.idx===0?"":u.idx;this.TRACE_INIT(`${Ie(u)}${l}`,()=>{const h=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:u.idx,rule:n,maxLookahead:u.maxLookahead||this.maxLookahead,hasPredicates:u.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),f=or(this.fullRuleNameToShort[n.name],Ri,u.idx);this.setLaFuncCache(f,h)})}),S(s,u=>{this.computeLookaheadFunc(n,u.idx,sr,"Repetition",u.maxLookahead,Ie(u))}),S(i,u=>{this.computeLookaheadFunc(n,u.idx,Ii,"Option",u.maxLookahead,Ie(u))}),S(a,u=>{this.computeLookaheadFunc(n,u.idx,ir,"RepetitionMandatory",u.maxLookahead,Ie(u))}),S(o,u=>{this.computeLookaheadFunc(n,u.idx,on,"RepetitionMandatoryWithSeparator",u.maxLookahead,Ie(u))}),S(c,u=>{this.computeLookaheadFunc(n,u.idx,ar,"RepetitionWithSeparator",u.maxLookahead,Ie(u))})})})}computeLookaheadFunc(e,n,r,s,i,a){this.TRACE_INIT(`${a}${n===0?"":n}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:e,maxLookahead:i||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:s}),c=or(this.fullRuleNameToShort[e.name],r,n);this.setLaFuncCache(c,o)})}getKeyForAutomaticLookahead(e,n){const r=this.getLastExplicitRuleShortName();return or(r,e,n)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,n){this.lookAheadFuncsCache.set(e,n)}}class Od extends Je{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const cn=new Od;function Nd(t){cn.reset(),t.accept(cn);const e=cn.dslMethods;return cn.reset(),e}function Si(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function _i(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function Cd(t,e,n){t.children[n]===void 0?t.children[n]=[e]:t.children[n].push(e)}function Ld(t,e,n){t.children[e]===void 0?t.children[e]=[n]:t.children[e].push(n)}const yd="name";function Oi(t,e){Object.defineProperty(t,yd,{enumerable:!1,configurable:!0,writable:!1,value:e})}function vd(t,e){const n=te(t),r=n.length;for(let s=0;s<r;s++){const i=n[s],a=t[i],o=a.length;for(let c=0;c<o;c++){const u=a[c];u.tokenTypeIdx===void 0&&this[u.name](u.children,e)}}}function Pd(t,e){const n=function(){};Oi(n,t+"BaseSemantics");const r={visit:function(s,i){if(N(s)&&(s=s[0]),!Ce(s))return this[s.name](s.children,i)},validateVisitor:function(){const s=kd(this,e);if(!v(s)){const i=A(s,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${i.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=r,n.prototype.constructor=n,n._RULE_NAMES=e,n}function Md(t,e,n){const r=function(){};Oi(r,t+"BaseSemanticsWithDefaults");const s=Object.create(n.prototype);return S(e,i=>{s[i]=vd}),r.prototype=s,r.prototype.constructor=r,r}var cr;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(cr||(cr={}));function kd(t,e){return xd(t,e)}function xd(t,e){const n=re(e,s=>Se(t[s])===!1),r=A(n,s=>({msg:`Missing visitor method: <${s}> on ${t.constructor.name} CST Visitor.`,type:cr.MISSING_METHOD,methodName:s}));return lt(r)}class bd{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=R(e,"nodeLocationTracking")?e.nodeLocationTracking:Le.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=U,this.cstFinallyStateUpdate=U,this.cstPostTerminal=U,this.cstPostNonTerminal=U,this.cstPostRule=U;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=_i,this.setNodeLocationFromNode=_i,this.cstPostRule=U,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=U,this.setNodeLocationFromNode=U,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Si,this.setNodeLocationFromNode=Si,this.cstPostRule=U,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=U,this.setNodeLocationFromNode=U,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=U,this.setNodeLocationFromNode=U,this.cstPostRule=U,this.setInitialNodeLocation=U;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const n={name:e,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?(r.endOffset=n.endOffset,r.endLine=n.endLine,r.endColumn=n.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){const n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?r.endOffset=n.endOffset:r.startOffset=NaN}cstPostTerminal(e,n){const r=this.CST_STACK[this.CST_STACK.length-1];Cd(r,n,e),this.setNodeLocationFromToken(r.location,n)}cstPostNonTerminal(e,n){const r=this.CST_STACK[this.CST_STACK.length-1];Ld(r,n,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(Ce(this.baseCstVisitorConstructor)){const e=Pd(this.className,te(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Ce(this.baseCstVisitorWithDefaultsConstructor)){const e=Md(this.className,te(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class wd{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):hn}LA(e){const n=this.currIdx+e;return n<0||this.tokVectorLength<=n?hn:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class Ud{ACTION(e){return e.call(this)}consume(e,n,r){return this.consumeInternal(n,e,r)}subrule(e,n,r){return this.subruleInternal(n,e,r)}option(e,n){return this.optionInternal(n,e)}or(e,n){return this.orInternal(n,e)}many(e,n){return this.manyInternal(e,n)}atLeastOne(e,n){return this.atLeastOneInternal(e,n)}CONSUME(e,n){return this.consumeInternal(e,0,n)}CONSUME1(e,n){return this.consumeInternal(e,1,n)}CONSUME2(e,n){return this.consumeInternal(e,2,n)}CONSUME3(e,n){return this.consumeInternal(e,3,n)}CONSUME4(e,n){return this.consumeInternal(e,4,n)}CONSUME5(e,n){return this.consumeInternal(e,5,n)}CONSUME6(e,n){return this.consumeInternal(e,6,n)}CONSUME7(e,n){return this.consumeInternal(e,7,n)}CONSUME8(e,n){return this.consumeInternal(e,8,n)}CONSUME9(e,n){return this.consumeInternal(e,9,n)}SUBRULE(e,n){return this.subruleInternal(e,0,n)}SUBRULE1(e,n){return this.subruleInternal(e,1,n)}SUBRULE2(e,n){return this.subruleInternal(e,2,n)}SUBRULE3(e,n){return this.subruleInternal(e,3,n)}SUBRULE4(e,n){return this.subruleInternal(e,4,n)}SUBRULE5(e,n){return this.subruleInternal(e,5,n)}SUBRULE6(e,n){return this.subruleInternal(e,6,n)}SUBRULE7(e,n){return this.subruleInternal(e,7,n)}SUBRULE8(e,n){return this.subruleInternal(e,8,n)}SUBRULE9(e,n){return this.subruleInternal(e,9,n)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,n,r=fn){if(K(this.definedRulesNames,e)){const a={message:We.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:j.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);const s=this.defineRule(e,n,r);return this[e]=s,s}OVERRIDE_RULE(e,n,r=fn){const s=sd(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(s);const i=this.defineRule(e,n,r);return this[e]=i,i}BACKTRACK(e,n){return function(){this.isBackTrackingStack.push(1);const r=this.saveRecogState();try{return e.apply(this,n),!0}catch(s){if(sn(s))return!1;throw s}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Fh(F(this.gastProductionsCache))}}class Fd{initRecognizerEngine(e,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=tn,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},R(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(N(e)){if(v(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(N(e))this.tokensMap=q(e,(i,a)=>(i[a.name]=a,i),{});else if(R(e,"modes")&&ce(oe(F(e.modes)),kf)){const i=oe(F(e.modes)),a=Hn(i);this.tokensMap=q(a,(o,c)=>(o[c.name]=c,o),{})}else if(ee(e))this.tokensMap=G(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Ke;const r=R(e,"modes")?oe(F(e.modes)):F(e),s=ce(r,i=>v(i.categoryMatches));this.tokenMatcher=s?tn:gt,Tt(F(this.tokensMap))}defineRule(e,n,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const s=R(r,"resyncEnabled")?r.resyncEnabled:fn.resyncEnabled,i=R(r,"recoveryValueFunc")?r.recoveryValueFunc:fn.recoveryValueFunc,a=this.ruleShortNameIdx<<Id+xe;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let o;return this.outputCst===!0?o=function(...l){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,l);const h=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(h),h}catch(h){return this.invokeRuleCatch(h,s,i)}finally{this.ruleFinallyStateUpdate()}}:o=function(...l){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,l)}catch(h){return this.invokeRuleCatch(h,s,i)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:n})}invokeRuleCatch(e,n,r){const s=this.RULE_STACK.length===1,i=n&&!this.isBackTracking()&&this.recoveryEnabled;if(sn(e)){const a=e;if(i){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return r(e);else{if(this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,a.partialCstResult=c}throw a}}else{if(s)return this.moveToTerminatedState(),r(e);throw a}}else throw e}optionInternal(e,n){const r=this.getKeyForAutomaticLookahead(Ii,n);return this.optionInternalLogic(e,n,r)}optionInternalLogic(e,n,r){let s=this.getLaFuncFromCache(r),i;if(typeof e!="function"){i=e.DEF;const a=e.GATE;if(a!==void 0){const o=s;s=()=>a.call(this)&&o.call(this)}}else i=e;if(s.call(this)===!0)return i.call(this)}atLeastOneInternal(e,n){const r=this.getKeyForAutomaticLookahead(ir,e);return this.atLeastOneInternalLogic(e,n,r)}atLeastOneInternalLogic(e,n,r){let s=this.getLaFuncFromCache(r),i;if(typeof n!="function"){i=n.DEF;const a=n.GATE;if(a!==void 0){const o=s;s=()=>a.call(this)&&o.call(this)}}else i=n;if(s.call(this)===!0){let a=this.doSingleRepetition(i);for(;s.call(this)===!0&&a===!0;)a=this.doSingleRepetition(i)}else throw this.raiseEarlyExitException(e,x.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],s,ir,e,Kf)}atLeastOneSepFirstInternal(e,n){const r=this.getKeyForAutomaticLookahead(on,e);this.atLeastOneSepFirstInternalLogic(e,n,r)}atLeastOneSepFirstInternalLogic(e,n,r){const s=n.DEF,i=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){s.call(this);const o=()=>this.tokenMatcher(this.LA(1),i);for(;this.tokenMatcher(this.LA(1),i)===!0;)this.CONSUME(i),s.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,i,o,s,si],o,on,e,si)}else throw this.raiseEarlyExitException(e,x.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(e,n){const r=this.getKeyForAutomaticLookahead(sr,e);return this.manyInternalLogic(e,n,r)}manyInternalLogic(e,n,r){let s=this.getLaFuncFromCache(r),i;if(typeof n!="function"){i=n.DEF;const o=n.GATE;if(o!==void 0){const c=s;s=()=>o.call(this)&&c.call(this)}}else i=n;let a=!0;for(;s.call(this)===!0&&a===!0;)a=this.doSingleRepetition(i);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],s,sr,e,Hf,a)}manySepFirstInternal(e,n){const r=this.getKeyForAutomaticLookahead(ar,e);this.manySepFirstInternalLogic(e,n,r)}manySepFirstInternalLogic(e,n,r){const s=n.DEF,i=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){s.call(this);const o=()=>this.tokenMatcher(this.LA(1),i);for(;this.tokenMatcher(this.LA(1),i)===!0;)this.CONSUME(i),s.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,i,o,s,ri],o,ar,e,ri)}}repetitionSepSecondInternal(e,n,r,s,i){for(;r();)this.CONSUME(n),s.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,r,s,i],r,on,e,i)}doSingleRepetition(e){const n=this.getLexerPosition();return e.call(this),this.getLexerPosition()>n}orInternal(e,n){const r=this.getKeyForAutomaticLookahead(Ri,n),s=N(e)?e:e.DEF,a=this.getLaFuncFromCache(r).call(this,s);if(a!==void 0)return s[a].ALT.call(this);this.raiseNoAltException(n,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new gd(n,e))}}subruleInternal(e,n,r){let s;try{const i=r!==void 0?r.ARGS:void 0;return this.subruleIdx=n,s=e.apply(this,i),this.cstPostNonTerminal(s,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),s}catch(i){throw this.subruleInternalError(i,r,e.ruleName)}}subruleInternalError(e,n,r){throw sn(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,n,r){let s;try{const i=this.LA(1);this.tokenMatcher(i,e)===!0?(this.consumeToken(),s=i):this.consumeInternalError(e,i,r)}catch(i){s=this.consumeInternalRecovery(e,n,i)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,s),s}consumeInternalError(e,n,r){let s;const i=this.LA(0);throw r!==void 0&&r.ERR_MSG?s=r.ERR_MSG:s=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new mi(s,n,i))}consumeInternalRecovery(e,n,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){const s=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,s)}catch(i){throw i.name===Ai?r:i}}else throw r}saveRecogState(){const e=this.errors,n=G(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,n,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Ke)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class Dd{initErrorHandler(e){this._errors=[],this.errorMessageProvider=R(e,"errorMessageProvider")?e.errorMessageProvider:Le.errorMessageProvider}SAVE_ERROR(e){if(sn(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:G(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return G(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,n,r){const s=this.getCurrRuleFullName(),i=this.getGAstProductions()[s],o=er(e,i,n,this.maxLookahead)[0],c=[];for(let l=1;l<=this.maxLookahead;l++)c.push(this.LA(l));const u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:c,previous:this.LA(0),customUserDescription:r,ruleName:s});throw this.SAVE_ERROR(new Td(u,this.LA(1),this.LA(0)))}raiseNoAltException(e,n){const r=this.getCurrRuleFullName(),s=this.getGAstProductions()[r],i=Jn(e,s,this.maxLookahead),a=[];for(let u=1;u<=this.maxLookahead;u++)a.push(this.LA(u));const o=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:i,actual:a,previous:o,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Ed(c,this.LA(1),o))}}class $d{initContentAssist(){}computeContentAssist(e,n){const r=this.gastProductionsCache[e];if(Ce(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return ii([r],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const n=ue(e.ruleStack),s=this.getGAstProductions()[n];return new Bf(s,e).startWalking()}}const un={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(un);const Ni=!0,Ci=Math.pow(2,xe)-1,Li=C({name:"RECORDING_PHASE_TOKEN",pattern:W.NA});Tt([Li]);const yi=qn(Li,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(yi);const Gd={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class Bd{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const n=e>0?e:"";this[`CONSUME${n}`]=function(r,s){return this.consumeInternalRecord(r,e,s)},this[`SUBRULE${n}`]=function(r,s){return this.subruleInternalRecord(r,e,s)},this[`OPTION${n}`]=function(r){return this.optionInternalRecord(r,e)},this[`OR${n}`]=function(r){return this.orInternalRecord(r,e)},this[`MANY${n}`]=function(r){this.manyInternalRecord(e,r)},this[`MANY_SEP${n}`]=function(r){this.manySepFirstInternalRecord(e,r)},this[`AT_LEAST_ONE${n}`]=function(r){this.atLeastOneInternalRecord(e,r)},this[`AT_LEAST_ONE_SEP${n}`]=function(r){this.atLeastOneSepFirstInternalRecord(e,r)}}this.consume=function(e,n,r){return this.consumeInternalRecord(n,e,r)},this.subrule=function(e,n,r){return this.subruleInternalRecord(n,e,r)},this.option=function(e,n){return this.optionInternalRecord(n,e)},this.or=function(e,n){return this.orInternalRecord(n,e)},this.many=function(e,n){this.manyInternalRecord(e,n)},this.atLeastOne=function(e,n){this.atLeastOneInternalRecord(e,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let n=0;n<10;n++){const r=n>0?n:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,n){return()=>!0}LA_RECORD(e){return hn}topLevelRuleRecord(e,n){try{const r=new Qe({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),n.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw r}throw r}}optionInternalRecord(e,n){return Rt.call(this,Y,e,n)}atLeastOneInternalRecord(e,n){Rt.call(this,Ae,n,e)}atLeastOneSepFirstInternalRecord(e,n){Rt.call(this,Re,n,e,Ni)}manyInternalRecord(e,n){Rt.call(this,D,n,e)}manySepFirstInternalRecord(e,n){Rt.call(this,he,n,e,Ni)}orInternalRecord(e,n){return Hd.call(this,e,n)}subruleInternalRecord(e,n,r){if(ln(n),!e||R(e,"ruleName")===!1){const o=new Error(`<SUBRULE${vi(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const s=qe(this.recordingProdStack),i=e.ruleName,a=new Z({idx:n,nonTerminalName:i,label:r==null?void 0:r.LABEL,referencedRule:void 0});return s.definition.push(a),this.outputCst?Gd:un}consumeInternalRecord(e,n,r){if(ln(n),!js(e)){const a=new Error(`<CONSUME${vi(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const s=qe(this.recordingProdStack),i=new M({idx:n,terminalType:e,label:r==null?void 0:r.LABEL});return s.definition.push(i),yi}}function Rt(t,e,n,r=!1){ln(n);const s=qe(this.recordingProdStack),i=Se(e)?e:e.DEF,a=new t({definition:[],idx:n});return r&&(a.separator=e.SEP),R(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),i.call(this),s.definition.push(a),this.recordingProdStack.pop(),un}function Hd(t,e){ln(e);const n=qe(this.recordingProdStack),r=N(t)===!1,s=r===!1?t:t.DEF,i=new fe({definition:[],idx:e,ignoreAmbiguities:r&&t.IGNORE_AMBIGUITIES===!0});R(t,"MAX_LOOKAHEAD")&&(i.maxLookahead=t.MAX_LOOKAHEAD);const a=Cs(s,o=>Se(o.GATE));return i.hasPredicates=a,n.definition.push(i),S(s,o=>{const c=new V({definition:[]});i.definition.push(c),R(o,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:R(o,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),o.ALT.call(this),this.recordingProdStack.pop()}),un}function vi(t){return t===0?"":`${t}`}function ln(t){if(t<0||t>Ci){const e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${Ci+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class Kd{initPerformanceTracer(e){if(R(e,"traceInitPerf")){const n=e.traceInitPerf,r=typeof n=="number";this.traceInitMaxIdent=r?n:1/0,this.traceInitPerf=r?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=Le.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;const r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${e}>`);const{time:s,value:i}=ys(n),a=s>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${s}ms`),this.traceInitIndent--,i}else return n()}}function Wd(t,e){e.forEach(n=>{const r=n.prototype;Object.getOwnPropertyNames(r).forEach(s=>{if(s==="constructor")return;const i=Object.getOwnPropertyDescriptor(r,s);i&&(i.get||i.set)?Object.defineProperty(t.prototype,s,i):t.prototype[s]=n.prototype[s]})})}const hn=qn(Ke,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(hn);const Le=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:ni,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),fn=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var j;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(j||(j={}));class It{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const n=this.className;this.TRACE_INIT("toFastProps",()=>{vs(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),S(this.definedRulesNames,s=>{const a=this[s].originalGrammarAction;let o;this.TRACE_INIT(`${s} Rule`,()=>{o=this.topLevelRuleRecord(s,a)}),this.gastProductionsCache[s]=o})}finally{this.disableRecording()}});let r=[];if(this.TRACE_INIT("Grammar Resolving",()=>{r=dd({rules:F(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)}),this.TRACE_INIT("Grammar Validations",()=>{if(v(r)&&this.skipValidations===!1){const s=pd({rules:F(this.gastProductionsCache),tokenTypes:F(this.tokensMap),errMsgProvider:We,grammarName:n}),i=Qf({lookaheadStrategy:this.lookaheadStrategy,rules:F(this.gastProductionsCache),tokenTypes:F(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(s,i)}}),v(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const s=Wh(F(this.gastProductionsCache));this.resyncFollows=s}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var s,i;(i=(s=this.lookaheadStrategy).initialize)===null||i===void 0||i.call(s,{rules:F(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(F(this.gastProductionsCache))})),!It.DEFER_DEFINITION_ERRORS_HANDLING&&!v(this.definitionErrors))throw e=A(this.definitionErrors,s=>s.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;const r=this;if(r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(e,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),R(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=R(n,"skipValidations")?n.skipValidations:Le.skipValidations}}It.DEFER_DEFINITION_ERRORS_HANDLING=!1,Wd(It,[Ad,_d,bd,wd,Fd,Ud,Dd,$d,Bd,Kd]);class jd extends It{constructor(e,n=Le){const r=G(n);r.outputCst=!0,super(e,r)}}const Pi=C({name:"HTML_COMMENT",pattern:/<!--[\s\S]*?-->/,line_breaks:!0}),Mi=C({name:"HTML_CONDITIONAL_COMMENT",pattern:/<!\[[\s\S]*?\]>/,line_breaks:!0}),zd=C({name:"XML",pattern:/<\?xml(?:.|\s)*?\?>/}),ki=C({name:"CDATA",pattern:/<!\[CDATA\[[\s\S]*?]]>/}),xi=C({name:"DTD",pattern:/<!.*?>/}),bi=C({name:"SCRIPTLET",pattern:/<%(.*?)%>|<\?(.*?)\?>/}),Vd=C({name:"SEA_WS",pattern:/[ \t]+/,group:W.SKIPPED}),wi=C({name:"LINE_BREAK",pattern:/\r?\n/}),Ui=C({name:"SCRIPT_OPEN",pattern:/<script\b[^>]*>/,push_mode:"SCRIPT"}),Fi=C({name:"STYLE_OPEN",pattern:/<style\b[^>]*>/,push_mode:"STYLE"}),ur=C({name:"TAG_OPEN",pattern:/</,push_mode:"TAG"}),Di=C({name:"HTML_TEXT",pattern:/[^<@]+/,line_breaks:!0}),lr=C({name:"TAG_CLOSE",pattern:/>/,pop_mode:!0}),$i=C({name:"TAG_SLASH_CLOSE",pattern:/\/>/,pop_mode:!0}),Gi=C({name:"TAG_SLASH",pattern:/\//}),Bi=C({name:"TAG_EQUALS",pattern:/=/,push_mode:"ATTVALUE"}),dn=C({name:"TAG_NAME",pattern:/[:@a-zA-Z\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:\.\-@\u00B7\u0300-\u036F\u203F-\u2040.0-9a-zA-Z]*/}),Yd=C({name:"TAG_WHITESPACE",pattern:/[ \t\r\n]+/,group:W.SKIPPED}),Hi=C({name:"SCRIPT_BODY",pattern:/[\s\S]*?<\/script>/,pop_mode:!0}),Ki=C({name:"STYLE_BODY",pattern:/[\s\S]*?<\/style>/,pop_mode:!0}),Wi=C({name:"ATTVALUE_VALUE",pattern:/ *("[^<"]*"|'[^<']*'|[-_./+,?=:#;0-9a-zA-Z]+ ?|#[0-9a-fA-F]+|[0-9]+%?)/,pop_mode:!0}),hr=C({name:"EDGE_COMMENT",pattern:/{{--[\s\S]*?--}}/,line_breaks:!0}),fr=C({name:"EDGE_MUSTACHE",pattern:/{{[\s\S]*?}}\s*/}),dr=C({name:"EDGE_SAFE_MUSTACHE",pattern:/{{{[\s\S]*?}}}\s*/}),ji=C({name:"EDGE_ESCAPED_MUSTACHE",pattern:/@{{[\s\S]*?}}\s*/}),zi=C({name:"EDGE_TAG",pattern:/@(?:!?\w+(?:\.\w+)*)\s*(?:\((?:[^)(]+|\((?:[^)(]+|\([^)(]*\))*\))*\))?/}),Vi=C({name:"EDGE_TAG_PROP",pattern:/@(if|elseif|else|each|flashMessage)\([^)]*\)\s*([\s\S]*?)@end/}),pr={defaultMode:"default",modes:{default:[Pi,Mi,zd,ki,xi,bi,wi,Vd,Ui,Fi,ur,hr,ji,dr,fr,zi,Di],TAG:[lr,$i,Gi,Bi,hr,dr,fr,Vi,dn,Yd],SCRIPT:[Hi],STYLE:[Ki],ATTVALUE:[Wi]}},Xd=()=>{const t=[];for(const e in pr.modes)t.push(...pr.modes[e]);return t},qd=new W(pr);class Yi extends jd{constructor(){super(Xd());const e=this;e.RULE("document",()=>{e.MANY(()=>{e.SUBRULE(e.content)})}),e.RULE("content",()=>{e.OR([{ALT:()=>e.CONSUME(Di)},{ALT:()=>e.CONSUME(wi)},{ALT:()=>e.SUBRULE(e.element)},{ALT:()=>e.SUBRULE(e.scriptlet)},{ALT:()=>e.SUBRULE(e.htmlComment)},{ALT:()=>e.SUBRULE(e.htmlConditionalComment)},{ALT:()=>e.SUBRULE(e.cdata)},{ALT:()=>e.SUBRULE(e.dtd)},{ALT:()=>e.SUBRULE(e.scriptElement)},{ALT:()=>e.SUBRULE(e.styleElement)},{ALT:()=>e.SUBRULE(e.edgeComment)},{ALT:()=>e.SUBRULE(e.edgeSafeMustache)},{ALT:()=>e.SUBRULE(e.edgeMustache)},{ALT:()=>e.SUBRULE(e.edgeEscapedMustache)},{ALT:()=>e.SUBRULE(e.edgeTag)}])}),e.RULE("element",()=>{e.OR([{ALT:()=>e.SUBRULE(e.openingTag)},{ALT:()=>e.SUBRULE(e.closingTag)}])}),e.RULE("openingTag",()=>{e.CONSUME(ur),e.CONSUME(dn),e.MANY(()=>{e.OR([{ALT:()=>e.SUBRULE(e.edgeTagProp)},{ALT:()=>e.SUBRULE(e.attribute)},{ALT:()=>e.SUBRULE(e.edgeSafeMustache)},{ALT:()=>e.SUBRULE(e.edgeMustache)},{ALT:()=>e.SUBRULE(e.edgeComment)}])}),e.OR1([{ALT:()=>e.CONSUME1($i)},{ALT:()=>e.CONSUME1(lr)}])}),e.RULE("attribute",()=>{e.CONSUME(dn),e.OPTION(()=>{e.CONSUME(Bi),e.CONSUME(Wi)})}),e.RULE("closingTag",()=>{e.CONSUME(ur),e.CONSUME(Gi),e.CONSUME(dn),e.CONSUME(lr)}),e.RULE("scriptlet",()=>{e.CONSUME(bi)}),e.RULE("htmlComment",()=>{e.CONSUME(Pi)}),e.RULE("htmlConditionalComment",()=>{e.CONSUME(Mi)}),e.RULE("cdata",()=>{e.CONSUME(ki)}),e.RULE("dtd",()=>{e.CONSUME(xi)}),e.RULE("scriptElement",()=>{e.CONSUME(Ui),e.CONSUME(Hi)}),e.RULE("styleElement",()=>{e.CONSUME(Fi),e.CONSUME(Ki)}),e.RULE("edgeComment",()=>{e.CONSUME(hr)}),e.RULE("edgeMustache",()=>{e.CONSUME(fr)}),e.RULE("edgeSafeMustache",()=>{e.CONSUME(dr)}),e.RULE("edgeEscapedMustache",()=>{e.CONSUME(ji)}),e.RULE("edgeTag",()=>{e.CONSUME(zi)}),e.RULE("edgeTagProp",()=>{e.CONSUME(Vi)}),this.performSelfAnalysis()}}const Zd=new Yi().getBaseCstVisitorConstructor();class Qd extends Zd{constructor(){super();Tr(this,St);Tr(this,En,new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","animateMotion","animateTransform","animate","circle","ellipse","feGaussianBlur","feDropShadow","feOffset","feBlend","feColorMatrix","feComposite","feDisplacementMap","feFlood","feImage","feMergeNode","feMorphology","fePointLight","feSpotLight","feTile","feTurbulence","image","line","mpath","path","polygon","polyline","rect","set","stop","use","view"]));this.validateVisitor()}document(n){const r=n.content[0].startOffset,s=n.content[n.content.length-1].endOffset;return{type:"document",children:n.content.map(i=>this.visit(i)),start:r,end:s}}content(n){if(n.HTML_TEXT)return{type:"htmlText",value:n.HTML_TEXT[0].image,start:n.HTML_TEXT[0].startOffset,end:n.HTML_TEXT[0].endOffset};if(n.LINE_BREAK)return{type:"linebreak",value:n.LINE_BREAK[0].image,start:n.LINE_BREAK[0].startOffset,end:n.LINE_BREAK[0].endOffset};const r=n.element||n.scriptlet||n.htmlComment||n.htmlConditionalComment||n.cdata||n.dtd||n.scriptElement||n.styleElement||n.edgeComment||n.edgeMustache||n.edgeSafeMustache||n.edgeEscapedMustache||n.edgeTag||n.htmlText;return this.visit(r)}element(n){return n.openingTag?this.visit(n.openingTag):n.selfClosingTag?this.visit(n.selfClosingTag):this.visit(n.closingTag)}openingTag(n){const r=n.TAG_NAME[0].image,s=n.edgeSafeMustache?n.edgeSafeMustache.map(h=>this.visit(h)):[],i=n.edgeMustache?n.edgeMustache.map(h=>this.visit(h)):[],a=n.edgeTagProp?n.edgeTagProp.map(h=>this.visit(h)):[],o=n.attribute?n.attribute.map(h=>this.visit(h)):[],c=n.edgeComment?n.edgeComment.map(h=>this.visit(h)):[],u=n.TAG_NAME[0].startOffset,l=n.TAG_NAME[0].endOffset;return mr(this,St,Ar).call(this,r)||n.TAG_SLASH_CLOSE?{type:"voidTag",tagName:r,edgeSafeMustaches:s,edgeMustaches:i,edgeTagProps:a,attributes:o,comments:c,start:u,end:l}:{type:"openingTag",tagName:r,edgeSafeMustaches:s,edgeMustaches:i,edgeTagProps:a,attributes:o,comments:c,start:u,end:l}}attribute(n){var o,c,u;const r=n.TAG_NAME[0].image,s=(u=(c=(o=n.ATTVALUE_VALUE)==null?void 0:o[0])==null?void 0:c.image)==null?void 0:u.trim(),i=n.TAG_NAME[0].startOffset,a=n.ATTVALUE_VALUE?n.ATTVALUE_VALUE[0].endOffset:n.TAG_NAME[0].endOffset;return{type:"attribute",attributeName:r,attributeValue:s,start:i,end:a}}closingTag(n){const r=n.TAG_NAME[0].image,s=n.TAG_OPEN[0].startOffset,i=n.TAG_CLOSE[0].endOffset;return mr(this,St,Ar).call(this,r)?{type:"doNotPrint"}:{type:"closingTag",tagName:r,start:s,end:i}}scriptlet(n){const r=n.SCRIPTLET[0].image,s=n.SCRIPTLET[0].startOffset,i=n.SCRIPTLET[0].endOffset;return{type:"scriptlet",value:r,start:s,end:i}}htmlComment(n){const r=n.HTML_COMMENT[0].image,s=n.HTML_COMMENT[0].startOffset,i=n.HTML_COMMENT[0].endOffset;return{type:"htmlComment",value:r,start:s,end:i}}htmlConditionalComment(n){const r=n.HTML_CONDITIONAL_COMMENT[0].image,s=n.HTML_CONDITIONAL_COMMENT[0].startOffset,i=n.HTML_CONDITIONAL_COMMENT[0].endOffset;return{type:"htmlConditionalComment",value:r,start:s,end:i}}cdata(n){const r=n.CDATA[0].image,s=n.CDATA[0].startOffset,i=n.CDATA[0].endOffset;return{type:"cdata",value:r,start:s,end:i}}dtd(n){const r=n.DTD[0].image,s=n.DTD[0].startOffset,i=n.DTD[0].endOffset;return{type:"dtd",value:r,start:s,end:i}}scriptElement(n){const r=n.SCRIPT_OPEN[0].image+n.SCRIPT_BODY[0].image,s=n.SCRIPT_OPEN[0].startOffset,i=n.SCRIPT_BODY[0].endOffset;return{type:"scriptElement",value:r,start:s,end:i}}styleElement(n){const r=n.STYLE_OPEN[0].image+n.STYLE_BODY[0].image,s=n.STYLE_OPEN[0].startOffset,i=n.STYLE_BODY[0].endOffset;return{type:"styleElement",value:r,start:s,end:i}}edgeComment(n){const r=n.EDGE_COMMENT[0].image,s=n.EDGE_COMMENT[0].startOffset,i=n.EDGE_COMMENT[0].endOffset;return{type:"edgeComment",value:r,start:s,end:i}}edgeMustache(n){const r=n.EDGE_MUSTACHE[0].image,s=n.EDGE_MUSTACHE[0].startOffset,i=n.EDGE_MUSTACHE[0].endOffset;return{type:"edgeMustache",value:r,start:s,end:i}}edgeSafeMustache(n){const r=n.EDGE_SAFE_MUSTACHE[0].image,s=n.EDGE_SAFE_MUSTACHE[0].startOffset,i=n.EDGE_SAFE_MUSTACHE[0].endOffset;return{type:"edgeSafeMustache",value:r,start:s,end:i}}edgeEscapedMustache(n){const r=n.EDGE_ESCAPED_MUSTACHE[0].image,s=n.EDGE_ESCAPED_MUSTACHE[0].startOffset,i=n.EDGE_ESCAPED_MUSTACHE[0].endOffset;return{type:"edgeEscapedMustache",value:r,start:s,end:i}}edgeTag(n){const r=n.EDGE_TAG[0].image,s=n.EDGE_TAG[0].startOffset,i=n.EDGE_TAG[0].endOffset;return{type:"edgeTag",value:r,start:s,end:i}}edgeTagProp(n){const r=n.EDGE_TAG_PROP[0].image,s=n.EDGE_TAG_PROP[0].startOffset,i=n.EDGE_TAG_PROP[0].endOffset;return{type:"edgeTagProp",value:r,start:s,end:i}}}En=new WeakMap,St=new WeakSet,Ar=function(n){return ra(this,En).has(n)};const pn=new Yi,Jd=new Qd;function ep(t){const e=qd.tokenize(t);pn.input=e.tokens;const n=pn.document();if(pn.errors.length>0)throw new Error(`Parsing Errors Detected: ${JSON.stringify(pn.errors)}`);return Jd.visit(n)}return ep});
